Ymt.add(function(){function a(b,e){return this instanceof a?(this.config=e,void(this.config.type=b)):c=new a(b,$m.merge(d,e))}function b(b){var d=this.config=$m.merge(c.config,b||{}),e=a;this.container=document.getElementById(d.container),null!=this.container&&(this.content=e.find(this.container,d.content)[0],this.handle=e.find(this.container,d.trigger),this.closecls=e.find(this.container,d.closecls)[0]),this.rect=this.content?e.rect(this.content):null}var c=null;a.find=function(a,b){function c(a){for(var d=0;d<a.length;d++){var g=a[d];if(1==g.nodeType){if("."==f)if(1==g.className.split(" ").length)g.className==b.split(".")[1]&&e.push(g);else for(var h=g.className.split(" "),i=0;i<h.length;i++)h[i]==b.split(".")[1]&&e.push(g);else"#"==f?g.getAttribute("id")==b.split("#")[1]&&e.push(g):g.tagName.toLowerCase()==b&&e.push(g);g.childNodes.length>=1&&c(g.childNodes)}}}var d=a.childNodes,e=[],f=b.substr(0,1);return c(d),e},a.template=function(a,b){for(var c=a.match(/\{[a-zA-Z]+\}/gi),d=0;d<c.length;d++){var e=c[d].replace(/[\{\}]/gi,"");a=a.replace(c[d],b[e])}return a},a.init=function(a,b){var d=c.config.type.toLowerCase();switch(d){case"alert":this.alert(a,b);break;case"struc":this.struc(a,b);break;case"temps":this.temps(a,b);break;default:this.alert(a,b)}},a.position=function(a){for(var b={left:a.offsetLeft,top:a.offsetTop},c=a.offsetParent;null!=c&&(style=this.style(c))&&"relative"!=style.position&&"absolute"!=style.position;)b.left+=c.offsetLeft,b.top+=c.offsetTop,c=c.offsetParent;return b},a.rect=function(a){return{height:Math.max(a.scrollHeight,a.offsetHeight),width:Math.max(a.scrollWidth,a.offsetWidth)}},a.style=function(a){return window.getComputedStyle&&window.getComputedStyle(a)||a.currentStyle},a.setStyle=function(a){var b=a.content,c=this.rect(a.trigger);"none"==this.style(b).display&&(b.style.visibility="hidden",b.style.display="block"),$m.mix(b.style,{left:a.position.left-a.config.offsetx+"px",top:(a.config.up?a.position.top-a.rect.height-c.height-a.config.offsety:a.position.top+c.height-a.config.offsety)+"px",zIndex:a.config.zIndex})},a.display=function(a,b){var c=a.content;return c.style.position="absolute",b===!1?void(c.style.visibility="hidden"):(b="none"==c.style.display||"none"==this.style(c).display||"hidden"==c.style.visibility||"hidden"==this.style(c).visibility?!0:!1,c.style.visibility=b?"visible":"hidden",void(("none"==c.style.display||"none"==this.style(c).display)&&(c.style.display="block")))},a.mouse=function(a){function b(){return d.timeout=setTimeout(function(){e.display(a,!1)},f.time),!1}var c=$m.event,e=this,f=a.config;c.bind(a.handle,"mouseenter",function(b,c,g){return d.timeout&&clearTimeout(d.timeout),"temps"==f.type.toLowerCase()&&(a.content.innerHTML=e.template(f.Temps,f.Data[g])),a.position=e.position(b.currentTarget),a.trigger=b.currentTarget,e.setStyle(a),e.display(a),!1}),c.bind(a.handle,"mouseleave",b),c.bind(a.content,"mouseenter",function(){return d.timeout&&clearTimeout(d.timeout),!1}),c.bind(a.content,"mouseleave",b)},a.click=function(a){var b=$m.event,c=this,d=a.config;b.bind(a.handle,"click",function(b,e,f){"temps"==d.type.toLowerCase()&&(a.content.innerHTML=c.template(a.config.Temps,d.Data[f])),a.position=c.position(b.currentTarget),a.trigger=b.currentTarget,c.setStyle(a),c.display(a)})},a.struc=function(a){var c=$m.event,d=new b(a),e=d.config;null!=d.container&&(d.rect=null==d.rect?that.rect(d.content):d.rect,"mouse"==e.event&&this.mouse(d),"click"==e.event&&this.click(d),d.closecls&&c.bind(d.closecls,"click",function(){that.display(d,!1)}))},a.r=function(a){return a.replace(/[\s*\.]/,"")},a.temps=function(a){function c(a,b){return void 0==a&&(a=d.container.appendChild(document.createElement("div")),a.className=g.r(b))||a,a}var d=new b(a),e=d.config,f=e.Temps,g=this;if(null!=d.container){if(0==e.Data.length)return void alert("模板数据不能为空");if(""==f)return void alert("模板不能为空");d.content=c(d.content,e.content),g.display(d,!1),d.rect=null==d.rect?g.rect(d.content):d.rect,"mouse"==e.event&&this.mouse(d),"click"==e.event&&this.click(d)}};var d={container:"",offsetx:0,offsety:0,type:"struc",event:"mouse",trigger:".trigger",up:!1,content:".content",Temps:"",Data:[],closecls:".close",time:"1000",isFrame:!0,zIndex:1e6,timeout:null,callback:function(){}};return window.onunload=window.onbeforeunload=function(){a=c=null},$m.augment(a,{init:function(a){this.constructor.init(a)}}),a});