Ymt.add(function(){function a(a,b){$m.each(b,function(b,c){a[c]=b})}function b(e,f){function g(a,b){function c(a){for(var f=0;f<a.length;f++){var g=a[f];if(1==g.nodeType){if("."==e)if(1==g.className.split(" ").length)g.className==b.split(".")[1]&&d.push(g);else for(var h=g.className.split(" "),i=0;i<h.length;i++)h[i]==b.split(".")[1]&&d.push(g);else"#"==e?g.getAttribute("id")==b.split("#")[1]&&d.push(g):g.tagName.toLowerCase()==b&&d.push(g);g.childNodes.length>=1&&c(g.childNodes)}}}var d=[],e=b.substr(0,1);return c(a.childNodes),d}function h(a,b){for(var c=a.match(/\{[a-zA-Z]+\}/gi),d=0;d<c.length;d++){var e=c[d].replace(/[\{\}]/gi,"");a=a.replace(c[d],b[e])}return a}function i(){var b=u("div.layerbox_mask"+q);if(b.length)this.el=b[0];else{this.el=n.body.appendChild(n.createElement("DIV")),a(this.el.style,$m.merge(d,{backgroundColor:f.backcolor,zIndex:f.zIndex,height:Math.max(o.clientHeight,o.scrollHeight)+"px",width:Math.max(o.clientWidth,o.scrollWidth)+"px",opacity:f.opacity,filter:"alpha(opacity="+100*f.opacity+")",mozOpacity:f.opacity}));var c=this.el.style;v.addEvent(p,"resize",function(){c.height=Math.max(o.clientHeight,o.scrollHeight)+"px",c.width=Math.max(o.clientWidth,o.scrollWidth)+"px"}),this.el.className="layerbox_mask"+q,6==r.version()&&(this.el.innerHTML='<iframe frameborder="no" style="width:100%;height:100%;display:block;filter:Alpha(opacity=0);"></iframe><div style="position:absolute;z-index:2;left:0;top:0;width:100%;height:100%;display:block;filter:Alpha(opacity=0);"></div>')}}function j(a){switch(f.position){case"center":this.center(a);break;case"rightbottom":this.rightbottom(a)}}function k(a){var b=n.body,c=Math.max,d="CSS1Compat"==n.compatMode?o:b;return{left:c(o.scrollLeft,b.scrollLeft),top:c(o.scrollTop,b.scrollTop),width:d[(a?"client":"scroll")+"Width"],height:a?d.clientHeight:c(d.clientHeight,d.scrollHeight)}}function l(a,b){function c(b){b=b||p.event,g=b.clientX,h=b.clientY,i=o.offsetLeft,j=o.offsetTop,o.ondragstart=this.ondragstart=function(){return!1},n.onmousemove=d,a.setCapture&&a.setCapture(),n.onlosecapture=p.onblur=n.onmouseup=e,b.preventDefault&&b.preventDefault()}function d(a){a=a||p.event;var b=j+a.clientY-h;m.style.left=i+a.clientX-g+"px",m.style.top=b+"px"}function e(){var b,c,d=o.offsetLeft,e=o.offsetTop,f=l.left+l.width-o.offsetWidth,g=l.top+l.height-o.offsetHeight;0>e&&(t2=0,c=!0),0>d&&(t=0,b=!0),d>f&&(t=f,b=!0),e+l.top>g&&(t2=g-l.top,c=!0),(c||b)&&(b&&(o.style.left=t+"px"),c&&(o.style.top=t2+"px")),p.onblur=this.onmouseup=this.onmousemove=null,a.releaseCapture&&a.releaseCapture()}var g,h,i,j,l,m=b,o=b||a;if(l=k(!0),void 0!=a.length)for(var q=0;q<a.length;q++)a[q].onmousedown=c,a[q].style.cursor=f.diagCursor;else a.onmousedown=c,a.style.cursor=f.diagCursor}function m(b){this.al=n.body.appendChild(n.createElement("DIV")),b&&(this.al.className="layerbox_dialog_alert",a(this.al.style,{position:"absolute",width:"auto",height:"auto",zIndex:f.zIndex+1,display:"none",backgroundColor:"#FFF",fontSize:"12px",textAlign:"center","float":"left"})),this.al.innerHTML=""}if(j.prototype.center=function(a){a.style.display="inline-block";var b=a.offsetHeight,c=a.offsetWidth;a.style.display="none",a.style.top=(6!=r.version()?(o.clientHeight-b)/2:(o.clientHeight-b)/2+o.scrollTop)+"px",a.style.left=(o.clientWidth-c)/2+"px",a.style.position="fixed",a.style.zIndex=f.zIndex+1,v.addEvent(p,"resize",function(){a.style.top=(6!=r.version()?(o.clientHeight-b)/2:(o.clientHeight-b)/2+o.scrollTop)+"px",a.style.left=(o.clientWidth-c)/2+"px"}),6==r.version()&&(a.style.position="absolute",v.addEvent(p,"scroll",function(){a.style.top=(o.clientHeight-b)/2+o.scrollTop+"px"}))},j.prototype.rightbottom=function(a){a.style.display="block";var b=a.offsetHeight,c=a.offsetWidth;a.style.display="none",a.style.top=(6!=r.version()?o.clientHeight-b:o.clientHeight-b+o.scrollTop)+"px",a.style.left=o.clientWidth-c+"px",a.style.position="fixed",a.style.zIndex=f.zIndex+1,v.addEvent(p,"resize",function(){a.style.top=(6!=r.version()?o.clientHeight-b:o.clientHeight-b+o.scrollTop)+"px",a.style.left=o.clientWidth-c+"px"}),6==r.version()&&(a.style.position="absolute",v.addEvent(p,"scroll",function(){a.style.top=o.clientHeight-b+o.scrollTop+"px"}))},!(this instanceof b))return new b(e,$m.merge(c,f));f=this.config=f;var n=f.ParIframe?f.ParIframeMan.document:document,o=n.documentElement,p=f.ParIframe?f.ParIframeMan:window,q=Date.parse(new Date)+Math.floor(1e5*Math.random()),r={ie:function(){return!!window.ActiveXObject},version:function(){if(window.ActiveXObject){var a=!!window.ActiveXObject,b=a&&!window.XMLHttpRequest,c=a&&!!document.documentMode;if(a){if(b)return"6.0";if(c)return"8.0";if(a&&!b&&!c)return"7.0"}}}};if(!r.ie()){var s=window.HTMLElement.prototype;s.__defineGetter__("outerHTML",function(){for(var a="<"+this.tagName,b=this.attributes,c=0,d=b.length;d>c;c++)b[c].specified&&(a+=" "+b[c].name+'="'+b[c].value+'"');return this.canHaveChildren?a+">"+this.innerHTML+"</"+this.tagName+">":a+" />"}),s.__defineSetter__("outerHTML",function(a){var b=this.ownerDocument.createRange();return b.setStartBefore(this),this.parentNode.replaceChild(b.createContextualFragment(a),this),a}),s.__defineGetter__("canHaveChildren",function(){return!/^(area|base|basefont|col|frame|hr|img|br|input|isindex|link|meta|param)$/.test(this.tagName.toLowerCase())})}var u=function(a,b){function c(){var a=this.i.split("#").length>1?this.i.split("#"):[null,this.i];return e.getElementById(a[1])}function d(){for(var a=this.i.split(".").length>1?this.i.split("."):[null,this.i],b=[],c=e.getElementsByTagName(a[0]||"*"),d=0;d<c.length;d++)if(1==c[d].className.split(" ").length)c[d].className==a[1]&&b.push(c[d]);else for(var f=c[d].className.split(" "),g=0;g<f.length;g++)f[g]==a[1]&&b.push(c[d]);return b}var e=void 0==b?n:b;switch(this.i=a,a.substr(0,1)){case"#":return c();case".":return d();default:return d()}},v={addEvent:n.addEventListener?function(a,b,c){a.addEventListener&&a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},removeEvent:n.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)}},w=function(a,b){if(void 0!=a.length)for(var c=0;c<a.length;c++)v.addEvent(a[c],"click",function(a){a=a||event,r.ie()?a.returnValue=!1:a.preventDefault(),b()});else v.addEvent(a,"click",function(a){a=a||event,r.ie()?a.returnValue=!1:a.preventDefault(),b()})};i.prototype={show:function(){this.el.style.display="block"},hide:function(){this.el.style.display="none"}},m.prototype={show:function(){this.al.style.display="block"},hide:function(){this.al.style.display="none"}};var x=function(){this._close=this._mk=this.dialog=null};x.mask=function(){var a=null;f.isFrame&&(a=new i),this.mask_show=function(){a&&a.show()},this.mask_hide=function(){a&&a.hide()}},x.prototype={show:function(){this._mk&&this._mk.mask_show(),this.dialog.show()},hide:function(){this._mk&&this._mk.mask_hide(),this.dialog.hide()},drag:function(){var a=g(this.dialog.al,f.dragTags);f.drag&&l(0==a.length?this.dialog.al:a,this.dialog.al)}};var y=new x;switch(x.alert=function(a,b){var c,d;y.dialog||(y.dialog=new m(!0),y._mk=new x.mask,y.dialog.al.innerHTML='<p style="margin:20px 50px 5px 50px">'+(a||f.text)+'</p><button style="width:auto;height:auto;margin:10px 10px 10px 10px" class="close">关闭</button>',c=new j(y.dialog.al),y.drag()),f.isloc&&(c=new j(y.dialog.al)),y.show(),f.callback(),("max"!=f.time||void 0!=b)&&(d=setTimeout(y.hide,b||f.time)),y._close=function(){clearInterval(d),y.hide(),f.closeCallback()},w(g(y.dialog.al,f.close),y._close)},x.struc=function(a,b){var c,d;y.dialog&&f.struc==a||(y._mk=new x.mask,f.ParIframe?(c=u(a||f.struc,document),y.dialog=new m,y.dialog.al.innerHTML=("undefined"!=c.length?c:c[0]).outerHTML):(c=u(a||f.struc),y.dialog.al="undefined"!=c.length?c:c[0]),f.struc=a,c=new j(y.dialog.al),y.drag()),f.isloc&&(c=new j(y.dialog.al)),y.show(),f.callback(),("max"!=f.time||void 0!=b)&&(d=setTimeout(y.hide,b||f.time)),y._close=function(){clearInterval(d),y.hide(),f.closeCallback()},w(g(y.dialog.al,f.close),y._close)},x.Temps=function(a,b,c){function d(){y.hide(),$m.isFunction(c)&&c.call(f)}var e;y.dialog||(y.dialog=new m,y._mk=new x.mask),y.dialog.al.innerHTML=h(f.Temps,a||f.data),f.drag&&y.drag(),f.isloc&&new j(y.dialog.al),y.show(),f.callback(),("max"!=f.time||void 0!=b)&&(e=setTimeout(d,b||f.time)),y._close=function(){clearInterval(b),d(),f.closeCallback()},w(g(y.dialog.al,f.close),y._close)},x.close=function(a,b){Ymt.isString(a)?(u(a).style.display="none",b&&y._close()):y._close()},this._main=function(a,b,c){switch(e=e.toLowerCase()){case"alert":x.alert(a,b);break;case"struc":x.struc(a,b);break;case"temps":x.Temps(a,b,c);break;default:x.alert(a)}},this._close=function(a,b){x.close(a,b)},e){case"drag":x.Drag()}}var c={struc:null,Temps:"",Data:"",close:".close",text:"alert 弹出浮层",drag:!1,dragLoc:!1,dragTags:"",dragBody:"",diagCursor:"move",time:"max",position:"center",isFrame:!0,opacity:.5,backcolor:"#ccc",zIndex:15555,ParIframe:!1,ParIframeMan:window.top,isloc:!0,callback:function(){},closeCallback:function(){}},d={display:"none",position:"absolute",backgroundColor:"#ccc",zIndex:9,top:"0px",left:"0px",height:"768px",width:"1024px",backgroundImage:"url(about:blank;)",opacity:.5,filter:"alpha(opacity=50)",mozOpacity:.5};return $m.augment(b,{close:function(){},alert:function(a,b,c){this._main(a,b,c)},hide:function(){this.hide()},show:function(){},close:function(a,b){this._close(a,b)}}),b});