/*=======================editor-aio-min.js===========================*/
if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={}}YAHOO.namespace=function(){var c=arguments,d=null,g,i,b;for(g=0;g<c.length;g+=1){b=(""+c[g]).split(".");d=YAHOO;for(i=b[0]=="YAHOO"?1:0;i<b.length;i+=1){d[b[i]]=d[b[i]]||{};d=d[b[i]]}}return d};YAHOO.log=function(b,c,d){var g=YAHOO.widget.Logger;return g&&g.log?g.log(b,c,d):false};YAHOO.register=function(c,i,m){var n=YAHOO.env.modules,b,k,d;n[c]||(n[c]={versions:[],builds:[]});n=n[c];b=m.version;m=m.build;k=YAHOO.env.listeners;n.name=c;n.version=b;n.build=m;n.versions.push(b);n.builds.push(m);n.mainClass=i;for(d=0;d<k.length;d+=1){k[d](n)}if(i){i.VERSION=b;i.BUILD=m}else{YAHOO.log("mainClass is undefined for module "+c,"warn")}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(b){return YAHOO.env.modules[b]||null};YAHOO.env.ua=function(){var b=function(a){var e=0;return parseFloat(a.replace(/\./g,function(){return e++==1?"":"."}))},c={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,caja:navigator.cajaVersion,secure:false,os:null},d=navigator&&navigator.userAgent,g=window&&window.location;g=g&&g.href;c.secure=g&&g.toLowerCase().indexOf("https")===0;if(d){if(/windows|win32/i.test(d)){c.os="windows"}else{if(/macintosh/i.test(d)){c.os="macintosh"}}if(/KHTML/.test(d)){c.webkit=1}if((g=d.match(/AppleWebKit\/([^\s]*)/))&&g[1]){c.webkit=b(g[1]);if(/ Mobile\//.test(d)){c.mobile="Apple"}else{if(g=d.match(/NokiaN[^\/]*/)){c.mobile=g[0]}}if(g=d.match(/AdobeAIR\/([^\s]*)/)){c.air=g[0]}}if(!c.webkit){if((g=d.match(/Opera[\s\/]([^\s]*)/))&&g[1]){c.opera=b(g[1]);if(g=d.match(/Opera Mini[^;]*/)){c.mobile=g[0]}}else{if((g=d.match(/MSIE\s([^;]*)/))&&g[1]){c.ie=b(g[1])}else{if(g=d.match(/Gecko\/([^\s]*)/)){c.gecko=1;if((g=d.match(/rv:([^\s\)]*)/))&&g[1]){c.gecko=b(g[1])}}}}}}return c}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var b=YAHOO_config.listener,c=YAHOO.env.listeners,d=true,g;if(b){for(g=0;g<c.length;g++){if(c[g]==b){d=false;break}}d&&c.push(b)}}})();YAHOO.lang=YAHOO.lang||{};(function(){var c=YAHOO.lang,d=Object.prototype,g=[],i=["toString","valueOf"],b={isArray:function(a){return d.toString.apply(a)==="[object Array]"},isBoolean:function(a){return typeof a==="boolean"},isFunction:function(a){return typeof a==="function"||d.toString.apply(a)==="[object Function]"},isNull:function(a){return a===null},isNumber:function(a){return typeof a==="number"&&isFinite(a)},isObject:function(a){return a&&(typeof a==="object"||c.isFunction(a))||false},isString:function(a){return typeof a==="string"},isUndefined:function(a){return typeof a==="undefined"},_IEEnumFix:YAHOO.env.ua.ie?function(h,f){var e,a,l;for(e=0;e<i.length;e+=1){a=i[e];l=f[a];if(c.isFunction(l)&&l!=d[a]){h[a]=l}}}:function(){},extend:function(h,f,e){if(!f||!h){throw new Error("extend failed, please check that all dependencies are included.")}var a=function(){},l;a.prototype=f.prototype;h.prototype=new a;h.prototype.constructor=h;h.superclass=f.prototype;if(f.prototype.constructor==d.constructor){f.prototype.constructor=f}if(e){for(l in e){if(c.hasOwnProperty(e,l)){h.prototype[l]=e[l]}}c._IEEnumFix(h.prototype,e)}},augmentObject:function(h,f){if(!f||!h){throw new Error("Absorb failed, verify dependencies.")}var e=arguments,a,l=e[2];if(l&&l!==true){for(a=2;a<e.length;a+=1){h[e[a]]=f[e[a]]}}else{for(a in f){if(l||!(a in h)){h[a]=f[a]}}c._IEEnumFix(h,f)}},augmentProto:function(h,f){if(!f||!h){throw new Error("Augment failed, verify dependencies.")}var e=[h.prototype,f.prototype],a;for(a=2;a<arguments.length;a+=1){e.push(arguments[a])}c.augmentObject.apply(this,e)},dump:function(h,f){var e,a,l=[];if(c.isObject(h)){if(h instanceof Date||"nodeType" in h&&"tagName" in h){return h}else{if(c.isFunction(h)){return"f(){...}"}}}else{return h+""}f=c.isNumber(f)?f:3;if(c.isArray(h)){l.push("[");e=0;for(a=h.length;e<a;e+=1){c.isObject(h[e])?l.push(f>0?c.dump(h[e],f-1):"{...}"):l.push(h[e]);l.push(", ")}l.length>1&&l.pop();l.push("]")}else{l.push("{");for(e in h){if(c.hasOwnProperty(h,e)){l.push(e+" => ");c.isObject(h[e])?l.push(f>0?c.dump(h[e],f-1):"{...}"):l.push(h[e]);l.push(", ")}}l.length>1&&l.pop();l.push("}")}return l.join("")},substitute:function(t,s,p){for(var v,u,h,l,f,e=[],a;;){v=t.lastIndexOf("{");if(v<0){break}u=t.indexOf("}",v);if(v+1>=u){break}l=a=t.substring(v+1,u);f=null;h=l.indexOf(" ");if(h>-1){f=l.substring(h+1);l=l.substring(0,h)}h=s[l];if(p){h=p(l,h,f)}if(c.isObject(h)){if(c.isArray(h)){h=c.dump(h,parseInt(f,10))}else{f=f||"";l=f.indexOf("dump");if(l>-1){f=f.substring(4)}a=h.toString();h=a==="[object Object]"||l>-1?c.dump(h,parseInt(f,10)):a}}else{if(!c.isString(h)&&!c.isNumber(h)){h="~-"+e.length+"-~";e[e.length]=a}}t=t.substring(0,v)+h+t.substring(u+1)}for(v=e.length-1;v>=0;v-=1){t=t.replace(new RegExp("~-"+v+"-~"),"{"+e[v]+"}","g")}return t},trim:function(e){try{return e.replace(/^\s+|\s+$/g,"")}catch(a){return e}},merge:function(){var h={},f=arguments,e=f.length,a;for(a=0;a<e;a+=1){c.augmentObject(h,f[a],true)}return h},later:function(l,h,f,e,r){l=l||0;h=h||{};var q=f,a=e,p;if(c.isString(f)){q=h[f]}if(!q){throw new TypeError("method undefined")}if(a&&!c.isArray(a)){a=[e]}f=function(){q.apply(h,a||g)};p=r?setInterval(f,l):setTimeout(f,l);return{interval:r,cancel:function(){this.interval?clearInterval(p):clearTimeout(p)}}},isValue:function(a){return c.isObject(a)||c.isString(a)||c.isNumber(a)||c.isBoolean(a)}};c.hasOwnProperty=d.hasOwnProperty?function(e,a){return e&&e.hasOwnProperty(a)}:function(e,a){return !c.isUndefined(e[a])&&e.constructor.prototype[a]!==e[a]};b.augmentObject(c,b,true);YAHOO.util.Lang=c;c.augment=c.augmentProto;YAHOO.augment=c.augmentProto;YAHOO.extend=c.extend})();YAHOO.register("yahoo",YAHOO,{version:"2.8.0r4",build:"2449"});(function(){YAHOO.env._id_counter=YAHOO.env._id_counter||0;var D=YAHOO.util,x=YAHOO.lang,z=YAHOO.env.ua,A=YAHOO.lang.trim,u={},y={},w=/^t(?:able|d|h)$/i,v=/color$/i,C=window.document,B=C.documentElement,s=z.opera,t=z.webkit,p=z.gecko,i=z.ie;D.Dom={CUSTOM_ATTRIBUTES:!B.hasAttribute?{"for":"htmlFor","class":"className"}:{htmlFor:"for",className:"class"},DOT_ATTRIBUTES:{},get:function(f){var b,e,c,a;if(f){if(f.nodeType||f.item){return f}if(typeof f==="string"){b=f;c=(f=C.getElementById(f))?f.attributes:null;if(f&&c&&c.id&&c.id.value===b){return f}else{if(f&&C.all){f=null;e=C.all[b];c=0;for(a=e.length;c<a;++c){if(e[c].id===b){return e[c]}}}}return f}if(YAHOO.util.Element&&f instanceof YAHOO.util.Element){f=f.get("element")}if("length" in f){b=[];c=0;for(a=f.length;c<a;++c){b[b.length]=D.Dom.get(f[c])}return b}return f}return null},getComputedStyle:function(b,a){if(window.getComputedStyle){return b.ownerDocument.defaultView.getComputedStyle(b,null)[a]}else{if(b.currentStyle){return D.Dom.IE_ComputedStyle.get(b,a)}}},getStyle:function(b,a){return D.Dom.batch(b,D.Dom._getStyle,a)},_getStyle:function(){if(window.getComputedStyle){return function(c,a){a=a==="float"?(a="cssFloat"):D.Dom._toCamel(a);var b=c.style[a];if(!b){if(c=c.ownerDocument.defaultView.getComputedStyle(c,null)){b=c[a]}}return b}}else{if(B.currentStyle){return function(f,b){var e;switch(b){case"opacity":e=100;try{e=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(c){try{e=f.filters("alpha").opacity}catch(a){}}return e/100;case"float":b="styleFloat";default:b=D.Dom._toCamel(b);e=f.currentStyle?f.currentStyle[b]:null;return f.style[b]||e}}}}}(),setStyle:function(c,a,b){D.Dom.batch(c,D.Dom._setStyle,{prop:a,val:b})},_setStyle:function(){return i?function(c,a){var b=D.Dom._toCamel(a.prop);a=a.val;if(c){switch(b){case"opacity":if(x.isString(c.style.filter)){c.style.filter="alpha(opacity="+a*100+")";if(!c.currentStyle||!c.currentStyle.hasLayout){c.style.zoom=1}}break;case"float":b="styleFloat";default:c.style[b]=a}}}:function(c,a){var b=D.Dom._toCamel(a.prop);a=a.val;if(c){if(b=="float"){b="cssFloat"}c.style[b]=a}}}(),getXY:function(a){return D.Dom.batch(a,D.Dom._getXY)},_canPosition:function(a){return D.Dom._getStyle(a,"display")!=="none"&&D.Dom._inDoc(a)},_getXY:function(){return C.documentElement.getBoundingClientRect?function(j){var f,h,g,e,c,b,a=Math.floor;h=false;if(D.Dom._canPosition(j)){h=j.getBoundingClientRect();g=j.ownerDocument;j=D.Dom.getDocumentScrollLeft(g);f=D.Dom.getDocumentScrollTop(g);h=[a(h.left),a(h.top)];if(i&&z.ie<8){c=e=2;b=g.compatMode;if(z.ie===6){if(b!=="BackCompat"){c=e=0}}if(b==="BackCompat"){b=d(g.documentElement,"borderLeftWidth");g=d(g.documentElement,"borderTopWidth");if(b!=="medium"){e=parseInt(b,10)}if(g!=="medium"){c=parseInt(g,10)}}h[0]-=e;h[1]-=c}if(f||j){h[0]+=j;h[1]+=f}h[0]=a(h[0]);h[1]=a(h[1])}return h}:function(g){var c,f,e,b=false,a=g;if(D.Dom._canPosition(g)){b=[g.offsetLeft,g.offsetTop];c=D.Dom.getDocumentScrollLeft(g.ownerDocument);f=D.Dom.getDocumentScrollTop(g.ownerDocument);for(e=p||z.webkit>519?true:false;a=a.offsetParent;){b[0]+=a.offsetLeft;b[1]+=a.offsetTop;if(e){b=D.Dom._calcBorders(a,b)}}if(D.Dom._getStyle(g,"position")!=="fixed"){for(a=g;(a=a.parentNode)&&a.tagName;){g=a.scrollTop;e=a.scrollLeft;if(p&&D.Dom._getStyle(a,"overflow")!=="visible"){b=D.Dom._calcBorders(a,b)}if(g||e){b[0]-=e;b[1]-=g}}b[0]+=c;b[1]+=f}else{if(s){b[0]-=c;b[1]-=f}else{if(t||p){b[0]+=c;b[1]+=f}}}b[0]=Math.floor(b[0]);b[1]=Math.floor(b[1])}return b}}(),getX:function(a){return D.Dom.batch(a,function(b){return D.Dom.getXY(b)[0]},D.Dom,true)},getY:function(a){return D.Dom.batch(a,function(b){return D.Dom.getXY(b)[1]},D.Dom,true)},setXY:function(c,a,b){D.Dom.batch(c,D.Dom._setXY,{pos:a,noRetry:b})},_setXY:function(h,e){var g=D.Dom._getStyle(h,"position"),f=D.Dom.setStyle,c=e.pos;e=e.noRetry;var b=[parseInt(D.Dom.getComputedStyle(h,"left"),10),parseInt(D.Dom.getComputedStyle(h,"top"),10)],a;if(g=="static"){g="relative";f(h,"position",g)}a=D.Dom._getXY(h);if(!c||a===false){return false}if(isNaN(b[0])){b[0]=g=="relative"?0:h.offsetLeft}if(isNaN(b[1])){b[1]=g=="relative"?0:h.offsetTop}c[0]!==null&&f(h,"left",c[0]-a[0]+b[0]+"px");c[1]!==null&&f(h,"top",c[1]-a[1]+b[1]+"px");if(!e){g=D.Dom._getXY(h);if(c[0]!==null&&g[0]!=c[0]||c[1]!==null&&g[1]!=c[1]){D.Dom._setXY(h,{pos:c,noRetry:true})}}},setX:function(b,a){D.Dom.setXY(b,[a,null])},setY:function(b,a){D.Dom.setXY(b,[null,a])},getRegion:function(a){return D.Dom.batch(a,function(b){var c=false;if(D.Dom._canPosition(b)){c=D.Region.getRegion(b)}return c},D.Dom,true)},getClientWidth:function(){return D.Dom.getViewportWidth()},getClientHeight:function(){return D.Dom.getViewportHeight()},getElementsByClassName:function(c,b,a,k,j,h){b=b||"*";a=a?D.Dom.get(a):C;if(!a){return[]}var g=[];b=a.getElementsByTagName(b);a=D.Dom.hasClass;for(var f=0,e=b.length;f<e;++f){if(a(b[f],c)){g[g.length]=b[f]}}k&&D.Dom.batch(g,k,j,h);return g},hasClass:function(b,a){return D.Dom.batch(b,D.Dom._hasClass,a)},_hasClass:function(c,a){var b=false;if(c&&a){c=D.Dom._getAttribute(c,"className")||"";b=a.exec?a.test(c):a&&(" "+c+" ").indexOf(" "+a+" ")>-1}return b},addClass:function(b,a){return D.Dom.batch(b,D.Dom._addClass,a)},_addClass:function(e,a){var c=false,b;if(e&&a){b=D.Dom._getAttribute(e,"className")||"";if(!D.Dom._hasClass(e,a)){D.Dom.setAttribute(e,"className",A(b+" "+a));c=true}}return c},removeClass:function(b,a){return D.Dom.batch(b,D.Dom._removeClass,a)},_removeClass:function(e,a){var c=false,b;if(e&&a){b=D.Dom._getAttribute(e,"className")||"";D.Dom.setAttribute(e,"className",b.replace(D.Dom._getClassRegex(a),""));a=D.Dom._getAttribute(e,"className");if(b!==a){D.Dom.setAttribute(e,"className",A(a));c=true;if(D.Dom._getAttribute(e,"className")===""){b=e.hasAttribute&&e.hasAttribute("class")?"class":"className";e.removeAttribute(b)}}}return c},replaceClass:function(c,a,b){return D.Dom.batch(c,D.Dom._replaceClass,{from:a,to:b})},_replaceClass:function(f,b){var e,c,a=false;if(f&&b){e=b.from;if(c=b.to){if(e){if(e!==c){b=D.Dom._getAttribute(f,"className")||"";e=(" "+b.replace(D.Dom._getClassRegex(e)," "+c)).split(D.Dom._getClassRegex(c));e.splice(1,0," "+c);D.Dom.setAttribute(f,"className",A(e.join("")));a=true}}else{a=D.Dom._addClass(f,b.to)}}else{a=false}}return a},generateId:function(c,a){a=a||"yui-gen";var b=function(f){if(f&&f.id){return f.id}var e=a+YAHOO.env._id_counter++;if(f){if(f.ownerDocument&&f.ownerDocument.getElementById(e)){return D.Dom.generateId(f,e+a)}f.id=e}return e};return D.Dom.batch(c,b,D.Dom,true)||b.apply(D.Dom,arguments)},isAncestor:function(c,a){c=D.Dom.get(c);a=D.Dom.get(a);var b=false;if(c&&a&&c.nodeType&&a.nodeType){if(c.contains&&c!==a){b=c.contains(a)}else{if(c.compareDocumentPosition){b=!!(c.compareDocumentPosition(a)&16)}}}return b},inDocument:function(b,a){return D.Dom._inDoc(D.Dom.get(b),a)},_inDoc:function(c,a){var b=false;if(c&&c.tagName){a=a||c.ownerDocument;b=D.Dom.isAncestor(a.documentElement,c)}return b},getElementsBy:function(c,b,a,k,j,h,g){b=b||"*";a=a?D.Dom.get(a):C;if(!a){return[]}var f=[];b=a.getElementsByTagName(b);a=0;for(var e=b.length;a<e;++a){if(c(b[a])){if(g){f=b[a];break}else{f[f.length]=b[a]}}}k&&D.Dom.batch(f,k,j,h);return f},getElementBy:function(c,a,b){return D.Dom.getElementsBy(c,a,b,null,null,null,true)},batch:function(g,c,f,e){var b=[];e=e?f:window;if((g=g&&(g.tagName||g.item)?g:D.Dom.get(g))&&c){if(g.tagName||g.length===undefined){return c.call(e,g,f)}for(var a=0;a<g.length;++a){b[b.length]=c.call(e,g[a],f)}}else{return false}return b},getDocumentHeight:function(){return Math.max(C.compatMode!="CSS1Compat"||t?C.body.scrollHeight:B.scrollHeight,D.Dom.getViewportHeight())},getDocumentWidth:function(){return Math.max(C.compatMode!="CSS1Compat"||t?C.body.scrollWidth:B.scrollWidth,D.Dom.getViewportWidth())},getViewportHeight:function(){var b=self.innerHeight,a=C.compatMode;if((a||i)&&!s){b=a=="CSS1Compat"?B.clientHeight:C.body.clientHeight}return b},getViewportWidth:function(){var b=self.innerWidth,a=C.compatMode;if(a||i){b=a=="CSS1Compat"?B.clientWidth:C.body.clientWidth}return b},getAncestorBy:function(b,a){for(;b=b.parentNode;){if(D.Dom._testElement(b,a)){return b}}return null},getAncestorByClassName:function(b,a){b=D.Dom.get(b);if(!b){return null}return D.Dom.getAncestorBy(b,function(c){return D.Dom.hasClass(c,a)})},getAncestorByTagName:function(b,a){b=D.Dom.get(b);if(!b){return null}return D.Dom.getAncestorBy(b,function(c){return c.tagName&&c.tagName.toUpperCase()==a.toUpperCase()})},getPreviousSiblingBy:function(b,a){for(;b;){b=b.previousSibling;if(D.Dom._testElement(b,a)){return b}}return null},getPreviousSibling:function(a){a=D.Dom.get(a);if(!a){return null}return D.Dom.getPreviousSiblingBy(a)},getNextSiblingBy:function(b,a){for(;b;){b=b.nextSibling;if(D.Dom._testElement(b,a)){return b}}return null},getNextSibling:function(a){a=D.Dom.get(a);if(!a){return null}return D.Dom.getNextSiblingBy(a)},getFirstChildBy:function(b,a){return(D.Dom._testElement(b.firstChild,a)?b.firstChild:null)||D.Dom.getNextSiblingBy(b.firstChild,a)},getFirstChild:function(a){a=D.Dom.get(a);if(!a){return null}return D.Dom.getFirstChildBy(a)},getLastChildBy:function(b,a){if(!b){return null}return(D.Dom._testElement(b.lastChild,a)?b.lastChild:null)||D.Dom.getPreviousSiblingBy(b.lastChild,a)},getLastChild:function(a){a=D.Dom.get(a);return D.Dom.getLastChildBy(a)},getChildrenBy:function(c,a){var b=(c=D.Dom.getFirstChildBy(c,a))?[c]:[];D.Dom.getNextSiblingBy(c,function(e){if(!a||a(e)){b[b.length]=e}return false});return b},getChildren:function(a){a=D.Dom.get(a);return D.Dom.getChildrenBy(a)},getDocumentScrollLeft:function(a){a=a||C;return Math.max(a.documentElement.scrollLeft,a.body.scrollLeft)},getDocumentScrollTop:function(a){a=a||C;return Math.max(a.documentElement.scrollTop,a.body.scrollTop)},insertBefore:function(b,a){b=D.Dom.get(b);a=D.Dom.get(a);if(!b||!a||!a.parentNode){return null}return a.parentNode.insertBefore(b,a)},insertAfter:function(b,a){b=D.Dom.get(b);a=D.Dom.get(a);if(!b||!a||!a.parentNode){return null}return a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)},getClientRegion:function(){var e=D.Dom.getDocumentScrollTop(),a=D.Dom.getDocumentScrollLeft(),c=D.Dom.getViewportWidth()+a,b=D.Dom.getViewportHeight()+e;return new D.Region(e,c,b,a)},setAttribute:function(c,a,b){D.Dom.batch(c,D.Dom._setAttribute,{attr:a,val:b})},_setAttribute:function(c,a){var b=D.Dom._toCamel(a.attr);a=a.val;if(c&&c.setAttribute){if(D.Dom.DOT_ATTRIBUTES[b]){c[b]=a}else{b=D.Dom.CUSTOM_ATTRIBUTES[b]||b;c.setAttribute(b,a)}}},getAttribute:function(b,a){return D.Dom.batch(b,D.Dom._getAttribute,a)},_getAttribute:function(c,a){var b;a=D.Dom.CUSTOM_ATTRIBUTES[a]||a;if(c&&c.getAttribute){b=c.getAttribute(a,2)}return b},_toCamel:function(b){function a(e,c){return c.toUpperCase()}return u[b]||(u[b]=b.indexOf("-")===-1?b:b.replace(/-([a-z])/gi,a))},_getClassRegex:function(b){var a;if(b!==undefined){if(b.exec){a=b}else{a=y[b];if(!a){b=b.replace(D.Dom._patterns.CLASS_RE_TOKENS,"\\$1");a=y[b]=new RegExp("(?:^|\\s)"+b+"(?= |$)","g")}}}return a},_patterns:{ROOT_TAG:/^body|html$/i,CLASS_RE_TOKENS:/([\.\(\)\^\$\*\+\?\|\[\]\{\}\\])/g},_testElement:function(b,a){return b&&b.nodeType==1&&(!a||a(b))},_calcBorders:function(e,a){var c=parseInt(D.Dom.getComputedStyle(e,"borderTopWidth"),10)||0,b=parseInt(D.Dom.getComputedStyle(e,"borderLeftWidth"),10)||0;if(p){if(w.test(e.tagName)){b=c=0}}a[0]+=b;a[1]+=c;return a}};var d=D.Dom.getComputedStyle;if(z.opera){D.Dom.getComputedStyle=function(b,a){b=d(b,a);if(v.test(a)){b=D.Dom.Color.toRGB(b)}return b}}if(z.webkit){D.Dom.getComputedStyle=function(b,a){b=d(b,a);if(b==="rgba(0, 0, 0, 0)"){b="transparent"}return b}}if(z.ie&&z.ie>=8&&C.documentElement.hasAttribute){D.Dom.DOT_ATTRIBUTES.type=true}})();YAHOO.util.Region=function(b,c,d,g){this.y=this.top=b;this[1]=b;this.right=c;this.bottom=d;this.x=this.left=g;this[0]=g;this.width=this.right-this.left;this.height=this.bottom-this.top};YAHOO.util.Region.prototype.contains=function(b){return b.left>=this.left&&b.right<=this.right&&b.top>=this.top&&b.bottom<=this.bottom};YAHOO.util.Region.prototype.getArea=function(){return(this.bottom-this.top)*(this.right-this.left)};YAHOO.util.Region.prototype.intersect=function(b){var c=Math.max(this.top,b.top),d=Math.min(this.right,b.right),g=Math.min(this.bottom,b.bottom);b=Math.max(this.left,b.left);return g>=c&&d>=b?new YAHOO.util.Region(c,d,g,b):null};YAHOO.util.Region.prototype.union=function(b){var c=Math.min(this.top,b.top),d=Math.max(this.right,b.right),g=Math.max(this.bottom,b.bottom);b=Math.min(this.left,b.left);return new YAHOO.util.Region(c,d,g,b)};YAHOO.util.Region.prototype.toString=function(){return"Region {top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+", height: "+this.height+", width: "+this.width+"}"};YAHOO.util.Region.getRegion=function(b){var c=YAHOO.util.Dom.getXY(b);return new YAHOO.util.Region(c[1],c[0]+b.offsetWidth,c[1]+b.offsetHeight,c[0])};YAHOO.util.Point=function(b,c){if(YAHOO.lang.isArray(b)){c=b[1];b=b[0]}YAHOO.util.Point.superclass.constructor.call(this,c,b,c,b)};YAHOO.extend(YAHOO.util.Point,YAHOO.util.Region);(function(){var c=YAHOO.util,d=/^width|height$/,g=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,i={get:function(f,e){var a="";a=f.currentStyle[e];return a=e==="opacity"?c.Dom.getStyle(f,"opacity"):!a||a.indexOf&&a.indexOf("px")>-1?a:c.Dom.IE_COMPUTED[e]?c.Dom.IE_COMPUTED[e](f,e):g.test(a)?c.Dom.IE.ComputedStyle.getPixel(f,e):a},getOffset:function(h,f){var e=h.currentStyle[f],a=f.charAt(0).toUpperCase()+f.substr(1),m="offset"+a,l="pixel"+a;a="";if(e=="auto"){a=e=h[m];if(d.test(f)){h.style[f]=e;if(h[m]>e){a=e-(h[m]-e)}h.style[f]="auto"}}else{if(!h.style[l]&&!h.style[f]){h.style[f]=e}a=h.style[l]}return a+"px"},getBorderWidth:function(f,e){var a=null;if(!f.currentStyle.hasLayout){f.style.zoom=1}switch(e){case"borderTopWidth":a=f.clientTop;break;case"borderBottomWidth":a=f.offsetHeight-f.clientHeight-f.clientTop;break;case"borderLeftWidth":a=f.clientLeft;break;case"borderRightWidth":a=f.offsetWidth-f.clientWidth-f.clientLeft;break}return a+"px"},getPixel:function(h,f){var e=null,a=h.currentStyle.right;h.style.right=h.currentStyle[f];e=h.style.pixelRight;h.style.right=a;return e+"px"},getMargin:function(e,a){return e.currentStyle[a]=="auto"?"0px":c.Dom.IE.ComputedStyle.getPixel(e,a)},getVisibility:function(f,e){for(var a;(a=f.currentStyle)&&a[e]=="inherit";){f=f.parentNode}return a?a[e]:"visible"},getColor:function(e,a){return c.Dom.Color.toRGB(e.currentStyle[a])||"transparent"},getBorderColor:function(e,a){e=e.currentStyle;return c.Dom.Color.toRGB(c.Dom.Color.toHex(e[a]||e.color))}},b={};b.top=b.right=b.bottom=b.left=b.width=b.height=i.getOffset;b.color=i.getColor;b.borderTopWidth=b.borderRightWidth=b.borderBottomWidth=b.borderLeftWidth=i.getBorderWidth;b.marginTop=b.marginRight=b.marginBottom=b.marginLeft=i.getMargin;b.visibility=i.getVisibility;b.borderColor=b.borderTopColor=b.borderRightColor=b.borderBottomColor=b.borderLeftColor=i.getBorderColor;c.Dom.IE_COMPUTED=b;c.Dom.IE_ComputedStyle=i})();(function(){var b=parseInt,c=RegExp,d=YAHOO.util;d.Dom.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(a){d.Dom.Color.re_RGB.test(a)||(a=d.Dom.Color.toHex(a));if(d.Dom.Color.re_hex.exec(a)){a="rgb("+[b(c.$1,16),b(c.$2,16),b(c.$3,16)].join(", ")+")"}return a},toHex:function(h){h=d.Dom.Color.KEYWORDS[h]||h;if(d.Dom.Color.re_RGB.exec(h)){h=c.$1.length===1?"0"+c.$1:Number(c.$1);var a=c.$2.length===1?"0"+c.$2:Number(c.$2),f=c.$3.length===1?"0"+c.$3:Number(c.$3);h=[h.toString(16),a.toString(16),f.toString(16)].join("")}if(h.length<6){h=h.replace(d.Dom.Color.re_hex3,"$1$1")}if(h!=="transparent"&&h.indexOf("#")<0){h="#"+h}return h.toLowerCase()}}})();YAHOO.register("dom",YAHOO.util.Dom,{version:"2.8.0r4",build:"2449"});YAHOO.util.CustomEvent=function(c,d,g,i,b){this.type=c;this.scope=d||window;this.silent=g;this.fireOnce=b;this.fired=false;this.firedWith=null;this.signature=i||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(c!=="_YUICEOnSubscribe"){this.subscribeEvent=new YAHOO.util.CustomEvent("_YUICEOnSubscribe",this,true)}this.lastError=null};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(b,c,d){if(!b){throw new Error("Invalid callback for subscriber to '"+this.type+"'")}this.subscribeEvent&&this.subscribeEvent.fire(b,c,d);b=new YAHOO.util.Subscriber(b,c,d);this.fireOnce&&this.fired?this.notify(b,this.firedWith):this.subscribers.push(b)},unsubscribe:function(c,d){if(!c){return this.unsubscribeAll()}for(var j=false,k=0,b=this.subscribers.length;k<b;++k){var i=this.subscribers[k];if(i&&i.contains(c,d)){this._delete(k);j=true}}return j},fire:function(){this.lastError=null;var c=this.subscribers.length,d=[].slice.call(arguments,0),j=true,k;if(this.fireOnce){if(this.fired){return true}else{this.firedWith=d}}this.fired=true;if(!c&&this.silent){return true}var b=this.subscribers.slice();for(k=0;k<c;++k){var i=b[k];if(i){j=this.notify(i,d);if(false===j){break}}}return j!==false},notify:function(c,m){var o,p=null,b=c.getScope(this.scope),n=YAHOO.util.Event.throwErrors;if(this.signature==YAHOO.util.CustomEvent.FLAT){if(m.length>0){p=m[0]}try{o=c.fn.call(b,p,c.obj)}catch(i){this.lastError=i;if(n){throw i}}}else{try{o=c.fn.call(b,this.type,m,c.obj)}catch(d){this.lastError=d;if(n){throw d}}}return o},unsubscribeAll:function(){var b=this.subscribers.length,c;for(c=b-1;c>-1;c--){this._delete(c)}this.subscribers=[];return b},_delete:function(b){var c=this.subscribers[b];if(c){delete c.fn;delete c.obj}this.subscribers.splice(b,1)},toString:function(){return"CustomEvent: '"+this.type+"', context: "+this.scope}};YAHOO.util.Subscriber=function(b,c,d){this.fn=b;this.obj=YAHOO.lang.isUndefined(c)?null:c;this.overrideContext=d};YAHOO.util.Subscriber.prototype.getScope=function(b){if(this.overrideContext){return this.overrideContext===true?this.obj:this.overrideContext}return b};YAHOO.util.Subscriber.prototype.contains=function(b,c){return c?this.fn==b&&this.obj==c:this.fn==b};YAHOO.util.Subscriber.prototype.toString=function(){return"Subscriber { obj: "+this.obj+", overrideContext: "+(this.overrideContext||"no")+" }"};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var c=false,m=[],o=[],p=0,b=[],n=0,i={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9},d=YAHOO.env.ua.ie;return{POLL_RETRYS:500,POLL_INTERVAL:40,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,CAPTURE:7,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:d,_interval:null,_dri:null,_specialTypes:{focusin:d?"focusin":"focus",focusout:d?"focusout":"blur"},DOMReady:false,throwErrors:false,startInterval:function(){if(!this._interval){this._interval=YAHOO.lang.later(this.POLL_INTERVAL,this,this._tryPreloadAttach,null,true)}},onAvailable:function(e,j,h,a,g){e=YAHOO.lang.isString(e)?[e]:e;for(var f=0;f<e.length;f+=1){b.push({id:e[f],fn:j,obj:h,overrideContext:a,checkReady:g})}p=this.POLL_RETRYS;this.startInterval()},onContentReady:function(e,g,f,a){this.onAvailable(e,g,f,a,true)},onDOMReady:function(){this.DOMReadyEvent.subscribe.apply(this.DOMReadyEvent,arguments)},_addListener:function(u,t,h,j,g,e){if(!h||!h.call){return false}if(this._isValidCollection(u)){for(var a=true,l=0,k=u.length;l<k;++l){a=this.on(u[l],t,h,j,g)&&a}return a}else{if(YAHOO.lang.isString(u)){if(a=this.getEl(u)){u=a}else{this.onAvailable(u,function(){YAHOO.util.Event._addListener(u,t,h,j,g,e)});return true}}}if(!u){return false}if("unload"==t&&j!==this){o[o.length]=[u,t,h,j,g];return true}var f=u;if(g){f=g===true?j:g}a=function(q){return h.call(f,YAHOO.util.Event.getEvent(q,u),j)};m[m.length]=[u,t,h,a,f,j,g,e];try{this._simpleAdd(u,t,a,e)}catch(v){this.lastError=v;this.removeListener(u,t,h);return false}return true},_getType:function(a){return this._specialTypes[a]||a},addListener:function(e,j,h,a,g){var f=(j=="focusin"||j=="focusout")&&!YAHOO.env.ua.ie?true:false;return this._addListener(e,this._getType(j),h,a,g,f)},addFocusListener:function(e,g,f,a){return this.on(e,"focusin",g,f,a)},removeFocusListener:function(a,e){return this.removeListener(a,"focusin",e)},addBlurListener:function(e,g,f,a){return this.on(e,"focusout",g,f,a)},removeBlurListener:function(a,e){return this.removeListener(a,"focusout",e)},removeListener:function(e,j,h,a){var g;j=this._getType(j);if(typeof e=="string"){e=this.getEl(e)}else{if(this._isValidCollection(e)){a=true;for(g=e.length-1;g>-1;g--){a=this.removeListener(e[g],j,h)&&a}return a}}if(!h||!h.call){return this.purgeElement(e,false,j)}if("unload"==j){for(g=o.length-1;g>-1;g--){if((a=o[g])&&a[0]==e&&a[1]==j&&a[2]==h){o.splice(g,1);return true}}return false}g=null;a=a;if("undefined"===typeof a){a=this._getCacheIndex(m,e,j,h)}if(a>=0){g=m[a]}if(!e||!g){return false}h=g[this.CAPTURE]===true?true:false;try{this._simpleRemove(e,j,g[this.WFN],h)}catch(f){this.lastError=f;return false}delete m[a][this.WFN];delete m[a][this.FN];m.splice(a,1);return true},getTarget:function(a){return this.resolveTextNode(a.target||a.srcElement)},resolveTextNode:function(a){try{if(a&&3==a.nodeType){return a.parentNode}}catch(e){}return a},getPageX:function(a){var e=a.pageX;if(!e&&0!==e){e=a.clientX||0;if(this.isIE){e+=this._getScrollLeft()}}return e},getPageY:function(a){var e=a.pageY;if(!e&&0!==e){e=a.clientY||0;if(this.isIE){e+=this._getScrollTop()}}return e},getXY:function(a){return[this.getPageX(a),this.getPageY(a)]},getRelatedTarget:function(a){var e=a.relatedTarget;if(!e){if(a.type=="mouseout"){e=a.toElement}else{if(a.type=="mouseover"){e=a.fromElement}}}return this.resolveTextNode(e)},getTime:function(a){if(!a.time){var f=(new Date).getTime();try{a.time=f}catch(e){this.lastError=e;return f}}return a.time},stopEvent:function(a){this.stopPropagation(a);this.preventDefault(a)},stopPropagation:function(a){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}},preventDefault:function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},getEvent:function(a){a=a||window.event;if(!a){for(var e=this.getEvent.caller;e;){if((a=e.arguments[0])&&Event==a.constructor){break}e=e.caller}}return a},getCharCode:function(a){a=a.keyCode||a.charCode||0;if(YAHOO.env.ua.webkit&&a in i){a=i[a]}return a},_getCacheIndex:function(e,k,j,a){for(var h=0,g=e.length;h<g;h+=1){var f=e[h];if(f&&f[this.FN]==a&&f[this.EL]==k&&f[this.TYPE]==j){return h}}return -1},generateId:function(a){var e=a.id;if(!e){e="yuievtautoid-"+n;++n;a.id=e}return e},_isValidCollection:function(a){try{return a&&typeof a!=="string"&&a.length&&!a.tagName&&!a.alert&&typeof a[0]!=="undefined"}catch(e){return false}},elCache:{},getEl:function(a){return typeof a==="string"?document.getElementById(a):a},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",YAHOO,0,0,1),_load:function(){if(!c){c=true;var a=YAHOO.util.Event;a._ready();a._tryPreloadAttach()}},_ready:function(){var a=YAHOO.util.Event;if(!a.DOMReady){a.DOMReady=true;a.DOMReadyEvent.fire();a._simpleRemove(document,"DOMContentLoaded",a._ready)}},_tryPreloadAttach:function(){if(b.length===0){p=0;if(this._interval){this._interval.cancel();this._interval=null}}else{if(!this.locked){if(this.isIE){if(!this.DOMReady){this.startInterval();return}}this.locked=true;var e=!c;e||(e=p>0&&b.length>0);var l=[],k=function(q,r){q=q;if(r.overrideContext){q=r.overrideContext===true?r.obj:r.overrideContext}r.fn.call(q,r.obj)},a,j,g,f,h=[];a=0;for(j=b.length;a<j;a+=1){if(g=b[a]){if(f=this.getEl(g.id)){if(g.checkReady){if(c||f.nextSibling||!e){h.push(g);b[a]=null}}else{k(f,g);b[a]=null}}else{l.push(g)}}}a=0;for(j=h.length;a<j;a+=1){g=h[a];k(this.getEl(g.id),g)}p--;if(e){for(a=b.length-1;a>-1;a--){g=b[a];if(!g||!g.id){b.splice(a,1)}}this.startInterval()}else{if(this._interval){this._interval.cancel();this._interval=null}}this.locked=false}}},purgeElement:function(e,j,h){e=YAHOO.lang.isString(e)?this.getEl(e):e;var a=this.getListeners(e,h),g;if(a){for(g=a.length-1;g>-1;g--){var f=a[g];this.removeListener(e,f.type,f.fn)}}if(j&&e&&e.childNodes){g=0;for(a=e.childNodes.length;g<a;++g){this.purgeElement(e.childNodes[g],j,h)}}},getListeners:function(s,l){var g=[],h;if(l){if(l==="unload"){h=[o]}else{l=this._getType(l);h=[m]}}else{h=[m,o]}s=YAHOO.lang.isString(s)?this.getEl(s):s;for(var f=0;f<h.length;f+=1){var e=h[f];if(e){for(var a=0,k=e.length;a<k;++a){var j=e[a];if(j&&j[this.EL]===s&&(!l||l===j[this.TYPE])){g.push({type:j[this.TYPE],fn:j[this.FN],obj:j[this.OBJ],adjust:j[this.OVERRIDE],scope:j[this.ADJ_SCOPE],index:a})}}}}return g.length?g:null},_unload:function(e){var k=YAHOO.util.Event,j,a,h,g=o.slice(),f;j=0;for(h=o.length;j<h;++j){if(a=g[j]){f=window;if(a[k.ADJ_SCOPE]){f=a[k.ADJ_SCOPE]===true?a[k.UNLOAD_OBJ]:a[k.ADJ_SCOPE]}a[k.FN].call(f,k.getEvent(e,a[k.EL]),a[k.UNLOAD_OBJ]);g[j]=null}}o=null;if(m){for(e=m.length-1;e>-1;e--){(a=m[e])&&k.removeListener(a[k.EL],a[k.TYPE],a[k.FN],e)}}k._simpleRemove(window,"unload",k._unload)},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var a=document.documentElement,e=document.body;return a&&(a.scrollTop||a.scrollLeft)?[a.scrollTop,a.scrollLeft]:e?[e.scrollTop,e.scrollLeft]:[0,0]},regCE:function(){},_simpleAdd:function(){return window.addEventListener?function(e,g,f,a){e.addEventListener(g,f,a)}:window.attachEvent?function(a,f,e){a.attachEvent("on"+f,e)}:function(){}}(),_simpleRemove:function(){return window.removeEventListener?function(e,g,f,a){e.removeEventListener(g,f,a)}:window.detachEvent?function(a,f,e){a.detachEvent("on"+f,e)}:function(){}}()}}();(function(){var b=YAHOO.util.Event;b.on=b.addListener;b.onFocus=b.addFocusListener;b.onBlur=b.addBlurListener;if(b.isIE){if(self!==self.top){document.onreadystatechange=function(){if(document.readyState=="complete"){document.onreadystatechange=null;b._ready()}}}else{YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var c=document.createElement("p");b._dri=setInterval(function(){try{c.doScroll("left");clearInterval(b._dri);b._dri=null;b._ready();c=null}catch(a){}},b.POLL_INTERVAL)}}else{if(b.webkit&&b.webkit<525){b._dri=setInterval(function(){var a=document.readyState;if("loaded"==a||"complete"==a){clearInterval(b._dri);b._dri=null;b._ready()}},b.POLL_INTERVAL)}else{b._simpleAdd(document,"DOMContentLoaded",b._ready)}}b._simpleAdd(window,"load",b._load);b._simpleAdd(window,"unload",b._unload);b._tryPreloadAttach()})()}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(c,d,g,i){this.__yui_events=this.__yui_events||{};var b=this.__yui_events[c];if(b){b.subscribe(d,g,i)}else{b=this.__yui_subscribers=this.__yui_subscribers||{};b[c]||(b[c]=[]);b[c].push({fn:d,obj:g,overrideContext:i})}},unsubscribe:function(c,d,g){var i=this.__yui_events=this.__yui_events||{};if(c){if(i=i[c]){return i.unsubscribe(d,g)}}else{c=true;for(var b in i){if(YAHOO.lang.hasOwnProperty(i,b)){c=c&&i[b].unsubscribe(d,g)}}return c}return false},unsubscribeAll:function(b){return this.unsubscribe(b)},createEvent:function(c,d){this.__yui_events=this.__yui_events||{};var g=d||{};d=this.__yui_events;var i;if(!d[c]){i=new YAHOO.util.CustomEvent(c,g.scope||this,g.silent,YAHOO.util.CustomEvent.FLAT,g.fireOnce);d[c]=i;g.onSubscribeCallback&&i.subscribeEvent.subscribe(g.onSubscribeCallback);this.__yui_subscribers=this.__yui_subscribers||{};if(g=this.__yui_subscribers[c]){for(var b=0;b<g.length;++b){i.subscribe(g[b].fn,g[b].obj,g[b].overrideContext)}}}return d[c]},fireEvent:function(b){this.__yui_events=this.__yui_events||{};var c=this.__yui_events[b];if(!c){return null}for(var d=[],g=1;g<arguments.length;++g){d.push(arguments[g])}return c.fire.apply(c,d)},hasEvent:function(b){if(this.__yui_events){if(this.__yui_events[b]){return true}}return false}};(function(){var b=YAHOO.util.Event,c=YAHOO.lang;YAHOO.util.KeyListener=function(n,f,m,i){function h(l){if(!f.shift){f.shift=false}if(!f.alt){f.alt=false}if(!f.ctrl){f.ctrl=false}if(l.shiftKey==f.shift&&l.altKey==f.alt&&l.ctrlKey==f.ctrl){var k,e=f.keys,j;if(YAHOO.lang.isArray(e)){for(var g=0;g<e.length;g++){k=e[g];j=b.getCharCode(l);if(k==j){a.fire(j,l);break}}}else{j=b.getCharCode(l);e==j&&a.fire(j,l)}}}if(!i){i=YAHOO.util.KeyListener.KEYDOWN}var a=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(c.isString(n)){n=document.getElementById(n)}c.isFunction(m)?a.subscribe(m):a.subscribe(m.fn,m.scope,m.correctScope);this.enable=function(){if(!this.enabled){b.on(n,i,h);this.enabledEvent.fire(f)}this.enabled=true};this.disable=function(){if(this.enabled){b.removeListener(n,i,h);this.disabledEvent.fire(f)}this.enabled=false};this.toString=function(){return"KeyListener ["+f.keys+"] "+n.tagName+(n.id?"["+n.id+"]":"")}};var d=YAHOO.util.KeyListener;d.KEYDOWN="keydown";d.KEYUP="keyup";d.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38}})();YAHOO.register("event",YAHOO.util.Event,{version:"2.8.0r4",build:"2449"});YAHOO.register("yahoo-dom-event",YAHOO,{version:"2.8.0r4",build:"2449"});YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(b){this._msxml_progid.unshift(b)},setDefaultPostHeader:function(b){if(typeof b=="string"){this._default_post_header=b}else{if(typeof b=="boolean"){this._use_default_post_header=b}}},setDefaultXhrHeader:function(b){if(typeof b=="string"){this._default_xhr_header=b}else{this._use_default_xhr_header=b}},setPollingInterval:function(b){if(typeof b=="number"&&isFinite(b)){this._polling_interval=b}},createXhrObject:function(c){var d,j,k;try{j=new XMLHttpRequest;d={conn:j,tId:c,xhr:true}}catch(b){for(k=0;k<this._msxml_progid.length;++k){try{j=new ActiveXObject(this._msxml_progid[k]);d={conn:j,tId:c,xhr:true};break}catch(i){}}}finally{return d}},getConnectionObject:function(b){var c,d=this._transaction_id;try{if(b){c={tId:d};if(b==="xdr"){c.conn=this._transport;c.xdr=true}else{if(b==="upload"){c.upload=true}}}else{c=this.createXhrObject(d)}c&&this._transaction_id++}catch(g){}return c},asyncRequest:function(c,d,j,k){var b,i=j&&j.argument?j.argument:null;if(this._isFileUpload){b="upload"}else{if(j.xdr){b="xdr"}}if(b=this.getConnectionObject(b)){j&&j.customevents&&this.initCustomEvents(b,j);if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(b,j,d,k);return b}if(c.toUpperCase()=="GET"){if(this._sFormData.length!==0){d+=(d.indexOf("?")==-1?"?":"&")+this._sFormData}}else{if(c.toUpperCase()=="POST"){k=k?this._sFormData+"&"+k:this._sFormData}}}if(c.toUpperCase()=="GET"&&j&&j.cache===false){d+=(d.indexOf("?")==-1?"?":"&")+"rnd="+(new Date).valueOf().toString()}if(this._use_default_xhr_header){this._default_headers["X-Requested-With"]||this.initHeader("X-Requested-With",this._default_xhr_header,true)}c.toUpperCase()==="POST"&&this._use_default_post_header&&this._isFormSubmit===false&&this.initHeader("Content-Type",this._default_post_header);if(b.xdr){this.xdr(b,c,d,j,k);return b}b.conn.open(c,d,true);if(this._has_default_headers||this._has_http_headers){this.setHeader(b)}this.handleReadyState(b,j);b.conn.send(k||"");this._isFormSubmit===true&&this.resetFormState();this.startEvent.fire(b,i);b.startEvent&&b.startEvent.fire(b,i);return b}else{return null}},initCustomEvents:function(b,c){var d;for(d in c.customevents){if(this._customEvents[d][0]){b[this._customEvents[d][0]]=new YAHOO.util.CustomEvent(this._customEvents[d][1],c.scope?c.scope:null);b[this._customEvents[d][0]].subscribe(c.customevents[d])}}},handleReadyState:function(b,c){var d=this,g=c&&c.argument?c.argument:null;if(c&&c.timeout){this._timeOut[b.tId]=window.setTimeout(function(){d.abort(b,c,true)},c.timeout)}this._poll[b.tId]=window.setInterval(function(){if(b.conn&&b.conn.readyState===4){window.clearInterval(d._poll[b.tId]);delete d._poll[b.tId];if(c&&c.timeout){window.clearTimeout(d._timeOut[b.tId]);delete d._timeOut[b.tId]}d.completeEvent.fire(b,g);b.completeEvent&&b.completeEvent.fire(b,g);d.handleTransactionResponse(b,c)}},this._polling_interval)},handleTransactionResponse:function(c,m,o){var p,b=m&&m.argument?m.argument:null,n=c.r&&c.r.statusText==="xdr:success"?true:false,i=c.r&&c.r.statusText==="xdr:failure"?true:false;try{p=c.conn.status!==undefined&&c.conn.status!==0||n?c.conn.status:i&&!o?0:13030}catch(d){p=13030}if(p>=200&&p<300||p===1223||n){o=c.xdr?c.r:this.createResponseObject(c,b);if(m&&m.success){m.scope?m.success.apply(m.scope,[o]):m.success(o)}this.successEvent.fire(o);c.successEvent&&c.successEvent.fire(o)}else{switch(p){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:o=this.createExceptionObject(c.tId,b,o?o:false);if(m&&m.failure){m.scope?m.failure.apply(m.scope,[o]):m.failure(o)}break;default:o=c.xdr?c.response:this.createResponseObject(c,b);if(m&&m.failure){m.scope?m.failure.apply(m.scope,[o]):m.failure(o)}}this.failureEvent.fire(o);c.failureEvent&&c.failureEvent.fire(o)}this.releaseObject(c)},createResponseObject:function(r,m){var o={},p={},c,n,i,d;try{n=r.conn.getAllResponseHeaders();i=n.split("\n");for(c=0;c<i.length;c++){d=i[c].indexOf(":");if(d!=-1){p[i[c].substring(0,d)]=YAHOO.lang.trim(i[c].substring(d+2))}}}catch(q){}o.tId=r.tId;o.status=r.conn.status==1223?204:r.conn.status;o.statusText=r.conn.status==1223?"No Content":r.conn.statusText;o.getResponseHeader=p;o.getAllResponseHeaders=n;o.responseText=r.conn.responseText;o.responseXML=r.conn.responseXML;if(m){o.argument=m}return o},createExceptionObject:function(b,c,d){var g={};g.tId=b;if(d){g.status=-1;g.statusText="transaction aborted"}else{g.status=0;g.statusText="communication failure"}if(c){g.argument=c}return g},initHeader:function(b,c,d){(d?this._default_headers:this._http_headers)[b]=c;if(d){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(b){var c;if(this._has_default_headers){for(c in this._default_headers){YAHOO.lang.hasOwnProperty(this._default_headers,c)&&b.conn.setRequestHeader(c,this._default_headers[c])}}if(this._has_http_headers){for(c in this._http_headers){YAHOO.lang.hasOwnProperty(this._http_headers,c)&&b.conn.setRequestHeader(c,this._http_headers[c])}this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(c,d,j){var k,b=d&&d.argument?d.argument:null;c=c||{};if(c.conn){if(c.xhr){if(this.isCallInProgress(c)){c.conn.abort();window.clearInterval(this._poll[c.tId]);delete this._poll[c.tId];if(j){window.clearTimeout(this._timeOut[c.tId]);delete this._timeOut[c.tId]}k=true}}else{if(c.xdr){c.conn.abort(c.tId);k=true}}}else{if(c.upload){var i=document.getElementById("yuiIO"+c.tId);if(i){YAHOO.util.Event.removeListener(i,"load");document.body.removeChild(i);if(j){window.clearTimeout(this._timeOut[c.tId]);delete this._timeOut[c.tId]}k=true}}else{k=false}}if(k===true){this.abortEvent.fire(c,b);c.abortEvent&&c.abortEvent.fire(c,b);this.handleTransactionResponse(c,d,true)}return k},isCallInProgress:function(b){b=b||{};return b.xhr&&b.conn?b.conn.readyState!==4&&b.conn.readyState!==0:b.xdr&&b.conn?b.conn.isCallInProgress(b.tId):b.upload===true?document.getElementById("yuiIO"+b.tId)?true:false:false},releaseObject:function(b){if(b&&b.conn){b.conn=null}}};(function(){function c(a){a='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+a+'" width="0" height="0"><param name="movie" value="'+a+'"><param name="allowScriptAccess" value="always"></object>';var e=document.createElement("div");document.body.appendChild(e);e.innerHTML=a}function m(e,h,g,a,f){d[parseInt(e.tId)]={o:e,c:a};if(f){a.method=h;a.data=f}e.conn.send(g,a,e.tId)}function o(a){c(a);i._transport=document.getElementById("YUIConnectionSwf")}function p(){i.xdrReadyEvent.fire()}function b(a,e){if(a){i.startEvent.fire(a,e.argument);a.startEvent&&a.startEvent.fire(a,e.argument)}}function n(a){var f=d[a.tId].o,e=d[a.tId].c;if(a.statusText==="xdr:start"){b(f,e)}else{a.responseText=decodeURI(a.responseText);f.r=a;if(e.argument){f.r.argument=e.argument}this.handleTransactionResponse(f,e,a.statusText==="xdr:abort"?true:false);delete d[a.tId]}}var i=YAHOO.util.Connect,d={};i.xdr=m;i.swf=c;i.transport=o;i.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");i.xdrReady=p;i.handleXdrResponse=n})();(function(){function c(l,v,u){var h,j=false,g=[],e=0,a,t,s,f;this.resetFormState();if(typeof l=="string"){l=document.getElementById(l)||document.forms[l]}else{if(typeof l=="object"){l=l}else{return}}if(v){this.createFrame(u?u:null);this._isFileUpload=this._isFormSubmit=true;this._formNode=l}else{a=0;for(t=l.elements.length;a<t;++a){v=l.elements[a];h=v.disabled;u=v.name;if(!h&&u){u=encodeURIComponent(u)+"=";h=encodeURIComponent(v.value);switch(v.type){case"select-one":if(v.selectedIndex>-1){f=v.options[v.selectedIndex];g[e++]=u+encodeURIComponent(f.attributes.value&&f.attributes.value.specified?f.value:f.text)}break;case"select-multiple":if(v.selectedIndex>-1){h=v.selectedIndex;for(s=v.options.length;h<s;++h){f=v.options[h];if(f.selected){g[e++]=u+encodeURIComponent(f.attributes.value&&f.attributes.value.specified?f.value:f.text)}}}break;case"radio":case"checkbox":if(v.checked){g[e++]=u+h}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(j===false){if(this._hasSubmitListener&&this._submitElementValue){g[e++]=this._submitElementValue}j=true}break;default:g[e++]=u+h}}}this._isFormSubmit=true;this._sFormData=g.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}}function i(){this._isFileUpload=this._isFormSubmit=false;this._formNode=null;this._sFormData=""}function m(e){var a="yuiIO"+this._transaction_id,f;if(YAHOO.env.ua.ie){f=document.createElement('<iframe id="'+a+'" name="'+a+'" />');if(typeof e=="boolean"){f.src="javascript:false"}}else{f=document.createElement("iframe");f.id=a;f.name=a}f.style.position="absolute";f.style.top="-1000px";f.style.left="-1000px";document.body.appendChild(f)}function n(e){var a=[];e=e.split("&");var g,f;for(g=0;g<e.length;g++){f=e[g].indexOf("=");if(f!=-1){a[g]=document.createElement("input");a[g].type="hidden";a[g].name=decodeURIComponent(e[g].substring(0,f));a[g].value=decodeURIComponent(e[g].substring(f+1));this._formNode.appendChild(a[g])}}return a}function b(l,y,x,h){var j="yuiIO"+l.tId,g=document.getElementById(j),e=document.documentMode&&document.documentMode===8?true:false,a=this,w=y&&y.argument?y.argument:null,v,f,B,A,z;A={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",x);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",j);YAHOO.env.ua.ie&&!e?this._formNode.setAttribute("encoding","multipart/form-data"):this._formNode.setAttribute("enctype","multipart/form-data");if(h){v=this.appendPostData(h)}this._formNode.submit();this.startEvent.fire(l,w);l.startEvent&&l.startEvent.fire(l,w);if(y&&y.timeout){this._timeOut[l.tId]=window.setTimeout(function(){a.abort(l,y,true)},y.timeout)}if(v&&v.length>0){for(x=0;x<v.length;x++){this._formNode.removeChild(v[x])}}for(f in A){if(YAHOO.lang.hasOwnProperty(A,f)){A[f]?this._formNode.setAttribute(f,A[f]):this._formNode.removeAttribute(f)}}this.resetFormState();z=function(){if(y&&y.timeout){window.clearTimeout(a._timeOut[l.tId]);delete a._timeOut[l.tId]}a.completeEvent.fire(l,w);l.completeEvent&&l.completeEvent.fire(l,w);B={tId:l.tId,argument:y.argument};try{B.responseText=g.contentWindow.document.body?g.contentWindow.document.body.innerHTML:g.contentWindow.document.documentElement.textContent;B.responseXML=g.contentWindow.document.XMLDocument?g.contentWindow.document.XMLDocument:g.contentWindow.document}catch(o){}if(y&&y.upload){y.scope?y.upload.apply(y.scope,[B]):y.upload(B)}a.uploadEvent.fire(B);l.uploadEvent&&l.uploadEvent.fire(B);d.removeListener(g,"load",z);setTimeout(function(){document.body.removeChild(g);a.releaseObject(l)},100)};d.addListener(g,"load",z)}var k=YAHOO.util.Connect,d=YAHOO.util.Event;k._isFormSubmit=false;k._isFileUpload=false;k._formNode=null;k._sFormData=null;k._submitElementValue=null;k.uploadEvent=new YAHOO.util.CustomEvent("upload");k._hasSubmitListener=function(){if(d){d.addListener(document,"click",function(e){e=d.getTarget(e);var a=e.nodeName.toLowerCase();if((a==="input"||a==="button")&&e.type&&e.type.toLowerCase()=="submit"){k._submitElementValue=encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)}});return true}return false}();k.setForm=c;k.resetFormState=i;k.createFrame=m;k.appendPostData=n;k.uploadFile=b})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});(function(c,m,o){if(c[m]===o){c[m]={}}m=c[m];var p=c.document,b=function(e,k,j,a){if(!k||!e){return e}if(j===o){j=true}var h,g,f;if(a&&(f=a.length)){for(h=0;h<f;h++){g=a[h];if(g in k){if(j||!(g in e)){e[g]=k[g]}}}}else{for(g in k){if(j||!(g in e)){e[g]=k[g]}}}return e},n=false,i=[],d=false;b(m,{version:"1.0.5",_init:function(){this.Env={mods:{}};this.Config={debug:true}},add:function(a,e){this.Env.mods[a]={name:a,fn:e};e(this);return this},ready:function(a){d||this._bindReady();n?a.call(c,this):i.push(a);return this},_bindReady:function(){var e=this,j=p.documentElement.doScroll,h=j?"onreadystatechange":"DOMContentLoaded";d=true;if(p.attachEvent){if(c!=c.top){var a=function(){if(p.readyState==="complete"){p.detachEvent(h,a);e._fireReady()}};p.attachEvent(h,a)}else{var g=function(){try{j("left");e._fireReady()}catch(k){setTimeout(g,1)}};g()}c.attachEvent("onload",function(){e._fireReady()})}else{var f=function(){p.removeEventListener(h,f,false);e._fireReady()};p.addEventListener(h,f,false)}},_fireReady:function(){if(!n){n=true;if(i){for(var a,e=0;a=i[e++];){a.call(c,this)}i=null}}},mix:b,merge:function(){var e=arguments,g={},f,a=e.length;for(f=0;f<a;++f){b(g,e[f])}return g},extend:function(e,k,j,a){if(!k||!e){return e}var h=Object.prototype,g=k.prototype,f=function(q){function l(){}l.prototype=q;return new l}(g);e.prototype=f;f.constructor=e;e.superclass=g;if(k!==Object&&g.constructor===h.constructor){g.constructor=k}j&&b(f,j);a&&b(e,a);return e},augment:function(e,g,f,a){return b(e.prototype,g.prototype,f,a)},weave:function(e,h,g,a){var f=[g[a],e];h==="before"&&f.reverse();g[a]=function(){for(var k=0,j;k<2;++k){j=f[k].apply(this,arguments)}return j};return this},app:function(a){var e=c[a]||{};b(e,this,true,["_init","add","namespace"]);e._init();return c[a]=e},namespace:function(){var e=arguments,j=e.length,h=null,a,g,f;for(a=0;a<j;++a){f=(""+e[a]).split(".");h=this;for(g=c[f[0]]===h?1:0;g<f.length;++g){h=h[f[g]]=h[f[g]]||{}}}return h},log:function(a,f,e){if(this.Config.debug){e&&(a=e+": "+a);if(c.console!==o&&console.log){console[f&&console[f]?f:"log"](a)}}return this},error:function(a){throw a},now:function(){return(new Date).getTime()}});m._init()})(window,"KISSY");KISSY.add("editor",function(b){function c(d,g){var a=c;if(!(this instanceof a)){return new a(d,g)}a._isReady||a._setup();return new a.Instance(d,g)}b.mix(c,{version:"1.0",lang:{},plugins:{},Env:{mods:{}},add:function(d,g,a){this.Env.mods[d]={name:d,fn:g,details:a||{}};return this},addPlugin:function(m,n){m=typeof m=="string"?[m]:m;var a=this.plugins,i,h,d;h=0;for(d=m.length;h<d;++h){i=m[h];a[i]||(a[i]=b.merge(n,{name:i}))}},_isReady:false,_setup:function(){this._loadModules();this._isReady=true},_attached:{},_loadModules:function(){var h=KISSY.Editor.Env.mods,i=this._attached,a,d;for(a in h){if(d=h[a]){i[a]=d;d.fn&&d.fn(this)}}}});b.Editor=c});KISSY.Editor.add("config",function(b){b.config={base:"",language:"zh-cn",theme:"default",toolbar:["source","","fontName","fontSize","bold","italic","underline","strikeThrough","foreColor","backColor","","link","smiley","image","","insertOrderedList","insertUnorderedList","outdent","indent","justifyLeft","justifyCenter","justifyRight"],statusbar:["wordcount","resize"],pluginsConfig:{}}});KISSY.Editor.add("lang~en",function(b){b.lang.en={source:{text:"Source",title:"Source"},undo:{text:"Undo",title:"Undo (Ctrl+Z)"},redo:{text:"Redo",title:"Redo (Ctrl+Y)"},fontName:{text:"Font Name",title:"Font Name",options:{Arial:"Arial","Times New Roman":"Times New Roman","Arial Black":"Arial Black","Arial Narrow":"Arial Narrow","Comic Sans MS":"Comic Sans MS","Courier New":"Courier New",Garamond:"Garamond",Georgia:"Georgia",Tahoma:"Tahoma","Trebuchet MS":"Trebuchet MS",Verdana:"Verdana"}},fontSize:{text:"Size",title:"Font size",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"Bold",title:"Bold (Ctrl+B)"},italic:{text:"Italic",title:"Italick (Ctrl+I)"},underline:{text:"Underline",title:"Underline (Ctrl+U)"},strikeThrough:{text:"Strikeout",title:"Strikeout"},link:{text:"Link",title:"Insert/Edit link",href:"URL:",target:"Open link in new window",remove:"Remove link"},blockquote:{text:"Blockquote",title:"Insert blockquote"},smiley:{text:"Smiley",title:"Insert smiley"},image:{text:"Image",title:"Insert image",tab_link:"Web Image",tab_local:"Local Image",tab_album:"Album Image",label_link:"Enter image web address:",label_local:"Browse your computer for the image file to upload:",label_album:"Select the image from your album:",uploading:"Uploading...",upload_error:"Exception occurs when uploading file.",upload_filter:"Only allow PNG, GIF, JPG image type.",upload_linkFilter:"The image link is not in our whitelist. Please upload as local image.",ok:"Insert"},insertOrderedList:{text:"Numbered List",title:"Numbered List (Ctrl+7)"},insertUnorderedList:{text:"Bullet List",title:"Bullet List (Ctrl+8)"},outdent:{text:"Decrease Indent",title:"Decrease Indent"},indent:{text:"Increase Indent",title:"Increase Indent"},justifyLeft:{text:"Left Justify",title:"Left Justify (Ctrl+L)"},justifyCenter:{text:"Center Justify",title:"Center Justify (Ctrl+E)"},justifyRight:{text:"Right Justify",title:"Right Justify (Ctrl+R)"},foreColor:{text:"Text Color",title:"Text Color"},backColor:{text:"Text Background Color",title:"Text Background Color"},maximize:{text:"Maximize",title:"Maximize"},removeformat:{text:"Remove Format",title:"Remove Format"},wordcount:{tmpl:"Remain %remain% words (include html code)"},resize:{larger_text:"Larger",larger_title:"Enlarge the editor",smaller_text:"Smaller",smaller_title:"Shrink the editor"},common:{ok:"OK",cancel:"Cancel"}}});KISSY.Editor.add("lang~zh-cn",function(b){b.lang["zh-cn"]={source:{text:"\u6e90\u7801",title:"\u6e90\u7801"},undo:{text:"\u64a4\u9500",title:"\u64a4\u9500"},redo:{text:"\u91cd\u505a",title:"\u91cd\u505a"},fontName:{text:"\u5b57\u4f53",title:"\u5b57\u4f53",options:{"\u5b8b\u4f53":"\u5b8b\u4f53","\u9ed1\u4f53":"\u9ed1\u4f53","\u96b6\u4e66":"\u96b6\u4e66","\u6977\u4f53":"\u6977\u4f53_GB2312","\u5fae\u8f6f\u96c5\u9ed1":"\u5fae\u8f6f\u96c5\u9ed1",Georgia:"Georgia","Times New Roman":"Times New Roman",Impact:"Impact","Courier New":"Courier New",Arial:"Arial",Verdana:"Verdana",Tahoma:"Tahoma"}},fontSize:{text:"\u5927\u5c0f",title:"\u5927\u5c0f",options:{"8":"1","10":"2","12":"3","14":"4","18":"5","24":"6","36":"7"}},bold:{text:"\u7c97\u4f53",title:"\u7c97\u4f53"},italic:{text:"\u659c\u4f53",title:"\u659c\u4f53"},underline:{text:"\u4e0b\u5212\u7ebf",title:"\u4e0b\u5212\u7ebf"},strikeThrough:{text:"\u5220\u9664\u7ebf",title:"\u5220\u9664\u7ebf"},link:{text:"\u94fe\u63a5",title:"\u63d2\u5165/\u7f16\u8f91\u94fe\u63a5",href:"URL:",target:"\u5728\u65b0\u7a97\u53e3\u6253\u5f00\u94fe\u63a5",remove:"\u79fb\u9664\u94fe\u63a5"},blockquote:{text:"\u5f15\u7528",title:"\u5f15\u7528"},smiley:{text:"\u8868\u60c5",title:"\u63d2\u5165\u8868\u60c5"},image:{text:"\u56fe\u7247",title:"\u63d2\u5165\u56fe\u7247",tab_link:"\u7f51\u7edc\u56fe\u7247",tab_local:"\u672c\u5730\u4e0a\u4f20",tab_album:"\u6211\u7684\u76f8\u518c",label_link:"\u8bf7\u8f93\u5165\u56fe\u7247\u5730\u5740\uff1a",label_local:"\u8bf7\u9009\u62e9\u672c\u5730\u56fe\u7247\uff1a",label_album:"\u8bf7\u9009\u62e9\u76f8\u518c\u56fe\u7247\uff1a",uploading:"\u6b63\u5728\u4e0a\u4f20...",upload_error:"\u5bf9\u4e0d\u8d77\uff0c\u4e0a\u4f20\u6587\u4ef6\u65f6\u53d1\u751f\u4e86\u9519\u8bef\uff1a",upload_filter:"\u4ec5\u652f\u6301 JPG, PNG \u548c GIF \u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",upload_linkFilter:'\u5bf9\u4e0d\u8d77\uff0c\u56fe\u7247\u6240\u5728\u7f51\u7ad9\u4e0d\u5728\u5141\u8bb8\u8303\u56f4\u5185\u3002\n\u8bf7\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u518d\u901a\u8fc7"\u672c\u5730\u4e0a\u4f20"\u4e0a\u4f20\u56fe\u7247\u3002',ok:"\u63d2\u5165"},insertOrderedList:{text:"\u6709\u5e8f\u5217\u8868",title:"\u6709\u5e8f\u5217\u8868"},insertUnorderedList:{text:"\u65e0\u5e8f\u5217\u8868",title:"\u65e0\u5e8f\u5217\u8868"},outdent:{text:"\u51cf\u5c11\u7f29\u8fdb",title:"\u51cf\u5c11\u7f29\u8fdb"},indent:{text:"\u589e\u52a0\u7f29\u8fdb",title:"\u589e\u52a0\u7f29\u8fdb"},justifyLeft:{text:"\u5de6\u5bf9\u9f50",title:"\u5de6\u5bf9\u9f50"},justifyCenter:{text:"\u5c45\u4e2d\u5bf9\u9f50",title:"\u5c45\u4e2d\u5bf9\u9f50"},justifyRight:{text:"\u53f3\u5bf9\u9f50",title:"\u53f3\u5bf9\u9f50"},foreColor:{text:"\u6587\u672c\u989c\u8272",title:"\u6587\u672c\u989c\u8272"},backColor:{text:"\u80cc\u666f\u989c\u8272",title:"\u80cc\u666f\u989c\u8272"},maximize:{text:"\u5168\u5c4f\u7f16\u8f91",title:"\u5168\u5c4f\u7f16\u8f91"},removeformat:{text:"\u6e05\u9664\u683c\u5f0f",title:"\u6e05\u9664\u683c\u5f0f"},wordcount:{tmpl:"\u8fd8\u53ef\u4ee5\u8f93\u5165 %remain% \u5b57\uff08\u542b html \u4ee3\u7801\uff09"},resize:{larger_text:"\u589e\u5927",larger_title:"\u589e\u5927\u7f16\u8f91\u533a\u57df",smaller_text:"\u7f29\u5c0f",smaller_title:"\u7f29\u5c0f\u7f16\u8f91\u533a\u57df"},common:{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88"}}});KISSY.Editor.add("core~plugin",function(b){b.PLUGIN_TYPE={CUSTOM:0,TOOLBAR_SEPARATOR:1,TOOLBAR_BUTTON:2,TOOLBAR_MENU_BUTTON:4,TOOLBAR_SELECT:8,STATUSBAR_ITEM:16,FUNC:32}});KISSY.Editor.add("core~dom",function(b){var c=YAHOO.env.ua;b.Dom={getText:function(a){return a?a.textContent||"":""},setItemUnselectable:function(m){var n,a,i,h,d;n=m.getElementsByTagName("*");a=-1;for(i=n.length;a<i;++a){d=a==-1?m:n[a];(h=d.nodeName)&&h!="INPUT"&&d.setAttribute("unselectable","on")}return m},BLOCK_ELEMENTS:{blockquote:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,p:1,address:1,center:1,pre:1,form:1,fieldset:1,caption:1,table:1,tbody:1,tr:1,th:1,td:1,ul:1,ol:1,dl:1,dt:1,dd:1,li:1}};if(c.ie){b.Dom.getText=function(a){return a?a.innerText||"":""}}});KISSY.Editor.add("core~color",function(b){var c=parseInt,d=RegExp;b.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},re_RGB:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,re_hex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,re_hex3:/([0-9A-F])/gi,toRGB:function(a){this.re_RGB.test(a)||(a=this.toHex(a));if(this.re_hex.exec(a)){a="rgb("+[c(d.$1,16),c(d.$2,16),c(d.$3,16)].join(", ")+")"}return a},toHex:function(h){h=this.KEYWORDS[h]||h;if(this.re_RGB.exec(h)){h=(d.$1>>0).toString(16);var a=(d.$2>>0).toString(16),f=(d.$3>>0).toString(16);h=[h.length==1?"0"+h:h,a.length==1?"0"+a:a,f.length==1?"0"+f:f].join("")}if(h.length<6){h=h.replace(this.re_hex3,"$1$1")}if(h!=="transparent"&&h.indexOf("#")<0){h="#"+h}return h.toLowerCase()},int2hex:function(a){a>>=0;return this.toHex("rgb("+(a&255)+","+(a>>8&255)+","+(a>>16&255)+")")}}});KISSY.Editor.add("core~command",function(b){var c=YAHOO.env.ua,d={backColor:c.gecko?"hiliteColor":"backColor"};b.Command={exec:function(i,a,h,f){a=d[a]||a;this._preExec(i,a,f);i.execCommand(a,false,h)},_preExec:function(h,a,f){if(c.gecko){a=typeof f==="undefined"?"bold,italic,underline,strikeThrough".indexOf(a)===-1:f;h.execCommand("styleWithCSS",false,a)}}}});KISSY.Editor.add("core~range",function(b){var c=YAHOO.env.ua.ie;b.Range={getSelectionRange:function(d){var g=d.document,a;if(d.getSelection){d=d.getSelection();if(d.getRangeAt){a=d.getRangeAt(0)}else{a=g.createRange();a.setStart(d.anchorNode,d.anchorOffset);a.setEnd(d.focusNode,d.focusOffset)}}else{if(g.selection){a=g.selection.createRange()}}return a},getCommonAncestor:function(a){return a.startContainer||a.parentElement&&a.parentElement()||a.commonParentElement&&a.commonParentElement()},getSelectedText:function(a){if("text" in a){return a.text}return a.toString?a.toString():""},saveRange:function(a){c&&a.contentWin.focus();return a.getSelectionRange()}}});KISSY.Editor.add("core~instance",function(c){var i=YAHOO.util,m=i.Dom,n=i.Event,b=YAHOO.lang,k=YAHOO.env.ua,d=k.ie;c.Instance=function(e,a){this.textarea=m.get(e);this.config=b.merge(c.config,a||{});this.sourceMode=false;this.toolbar=new c.Toolbar(this);this.statusbar=new c.Statusbar(this);this._init()};b.augmentObject(c.Instance.prototype,{_init:function(){this._renderUI();this._initPlugins();this._initAutoFocus()},_renderUI:function(){this._renderContainer();this._setupContentPanel()},_initPlugins:function(){var e,a;a=c.plugins;var f=[];for(e in a){f[e]=b.merge(a[e])}this.plugins=f;this.toolbar.init();this.statusbar.init();for(e in f){a=f[e];if(!a.inited){if(a.type===c.PLUGIN_TYPE.FUNC){a.editor=this;a.init&&a.init();a.inited=true}}}},_renderContainer:function(){var e=this.textarea,a=m.getRegion(e),g=a.right-a.left-2+"px",f=a.bottom-a.top-2+"px";a=document.createElement("div");a.className="ks-editor";a.style.width=g;a.innerHTML='<div class="ks-editor-toolbar"></div><div class="ks-editor-content"><iframe frameborder="0" allowtransparency="1"></iframe></div><div class="ks-editor-statusbar"></div>';g=a.childNodes[1];g.style.width="100%";g.style.height=f;g=g.childNodes[0];g.style.width="100%";g.style.height="100%";g.setAttribute("frameBorder",0);e.style.display="none";m.insertBefore(a,e);this.container=a;this.toolbar.domEl=a.childNodes[0];this.contentWin=g.contentWindow;this.contentDoc=g.contentWindow.document;this.statusbar.domEl=a.childNodes[2]},_setupContentPanel:function(){var e=this.contentDoc,a=this.config;a=a.base+"themes/"+a.theme+"/"+("content"+(a.debug?"":"-min")+".css");var f=this;e.open();e.write('<!doctype html><html><head><title>Rich Text Area</title><meta charset="charset=gbk" /><link href="{CONTENT_CSS}" rel="stylesheet" /></head><body spellcheck="false" class="ks-editor-post">{CONTENT}</body></html>'.replace("{CONTENT_CSS}",a).replace("{CONTENT}",this.textarea.value));e.close();if(d){e.body.contentEditable="true"}else{e.designMode="on"}d&&n.on(e,"click",function(){e.activeElement.parentNode.nodeType===9&&f._focusToEnd()})},_initAutoFocus:function(){this.config.autoFocus&&this._focusToEnd()},_focusToEnd:function(){this.contentWin.focus();var e=this.contentDoc.body.lastChild,a=c.Range.getSelectionRange(this.contentWin);if(k.ie){try{a.moveToElementText(e)}catch(g){}a.collapse(false);a.select()}else{try{a.setEnd(e,e.childNodes.length)}catch(f){}a.collapse(false)}},focus:function(){this._focusToEnd()},execCommand:function(e,a,f){this.contentWin.focus();c.Command.exec(this.contentDoc,e,a,f)},getData:function(){if(this.sourceMode){return this.textarea.value}return this.getContentDocData()},getContentDocData:function(){var e="",a=c.plugins.save;e=this.contentDoc.body.innerHTML;if(e=="<br>"){e=""}if(a&&a.filterData){e=a.filterData(e)}return e},getSelectionRange:function(){return c.Range.getSelectionRange(this.contentWin)}})});KISSY.Editor.add("core~toolbar",function(r){var m=YAHOO.util,o=m.Dom,p=m.Event,c=YAHOO.lang,n=YAHOO.env.ua.ie,i=n===6,d=r.PLUGIN_TYPE,q=document.createElement("div");r.Toolbar=function(a){this.editor=a;this.config=a.config;this.lang=r.lang[this.config.language];this.items=[];this.stateItems=[]};c.augmentObject(r.Toolbar.prototype,{init:function(){for(var g=this.config.toolbar,f=this.editor.plugins,a,e=0,b=g.length;e<b;++e){if(a=g[e]){if(a in f){a=f[a];this._addItem(a);this.items.push(a);"fontName,fontSize,bold,italic,underline,strikeThroughinsertOrderedList,insertUnorderedListjustifyLeft,justifyCenter,justifyRight".indexOf(a.name)!==-1&&this.stateItems.push(a)}}else{this._addSeparator()}}this._initUpdateState()},_addItem:function(e){var b,a=e.type;b=this.lang;if(!e.lang){e.lang=c.merge(b.common,this.lang[e.name]||{})}b='<div class="ks-editor-toolbar-button ks-inline-block" title="{TITLE}"><div class="ks-editor-toolbar-button-outer-box"><div class="ks-editor-toolbar-button-inner-box"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div></div></div>'.replace("{TITLE}",e.lang.title||"").replace("{NAME}",e.name).replace("{TEXT}",e.lang.text||"");if(i){b=b.replace("outer-box","outer-box ks-inline-block").replace("inner-box","inner-box ks-inline-block")}q.innerHTML=b;e.domEl=b=q.firstChild;if(a==d.TOOLBAR_MENU_BUTTON||a==d.TOOLBAR_SELECT){this._renderMenuButton(e);a==d.TOOLBAR_SELECT&&this._renderSelect(e)}this._bindItemUI(e);this._addToToolbar(b);e.editor=this.editor;e.init&&e.init();e.inited=true},_renderMenuButton:function(e){var b=e.domEl,a=b.getElementsByTagName("span")[0].parentNode;o.addClass(b,"ks-editor-toolbar-menu-button");a.innerHTML='<div class="ks-editor-toolbar-menu-button-caption ks-inline-block"><span class="ks-editor-toolbar-item ks-editor-toolbar-{NAME}">{TEXT}</span></div><div class="ks-editor-toolbar-menu-button-dropdown ks-inline-block"></div>'.replace("{NAME}",e.name).replace("{TEXT}",e.lang.text||"")},_renderSelect:function(a){o.addClass(a.domEl,"ks-editor-toolbar-select")},_bindItemUI:function(b){var a=b.domEl;b.exec&&p.on(a,"click",function(){b.exec()});p.on(a,"mousedown",function(){o.addClass(a,"ks-editor-toolbar-button-active")});p.on(a,"mouseup",function(){o.removeClass(a,"ks-editor-toolbar-button-active")});p.on(a,"mouseout",function(e){e=p.getRelatedTarget(e);var g;try{if(a.contains){g=a.contains(e)}else{if(a.compareDocumentPosition){g=a.compareDocumentPosition(e)&8}}}catch(f){g=false}g||o.removeClass(a,"ks-editor-toolbar-button-active")});if(i){p.on(a,"mouseenter",function(){o.addClass(a,"ks-editor-toolbar-button-hover")});p.on(a,"mouseleave",function(){o.removeClass(a,"ks-editor-toolbar-button-hover")})}},_addSeparator:function(){q.innerHTML='<div class="ks-editor-stripbar-sep ks-inline-block"></div>';this._addToToolbar(q.firstChild)},_addToToolbar:function(a){if(n){a=r.Dom.setItemUnselectable(a)}this.domEl.appendChild(a)},_initUpdateState:function(){var b=this.editor.contentDoc,a=this;p.on(b,"click",function(){a.updateState()});p.on(b,"keyup",function(e){e=e.keyCode;if(e>=33&&e<=40||e===8||e===13||e===46){a.updateState()}})},updateState:function(g){var f=this.stateItems,a;g=g?g.join("|"):"";for(var e=0,b=f.length;e<b;e++){a=f[e];g&&g.indexOf(a.name)===-1||(a.updateState?a.updateState():this.updateItemState(a))}},updateItemState:function(e){var b=this.editor.contentDoc;try{if(b.queryCommandEnabled(e.name)){b.queryCommandState(e.name)?o.addClass(e.domEl,"ks-editor-toolbar-button-selected"):o.removeClass(e.domEl,"ks-editor-toolbar-button-selected")}}catch(a){}}})});KISSY.Editor.add("core~statusbar",function(b){var c=YAHOO.lang,d=YAHOO.env.ua.ie,g=document.createElement("div");b.Statusbar=function(a){this.editor=a;this.config=a.config;this.lang=b.lang[this.config.language]};c.augmentObject(b.Statusbar.prototype,{init:function(){for(var e=this.config.statusbar,i=this.editor.plugins,h,f=0,a=e.length;f<a;++f){if(h=e[f]){h in i&&this._addItem(i[h])}else{this._addSep()}}},_addItem:function(a){var e;e=this.lang;if(!a.lang){a.lang=c.merge(e.common,this.lang[a.name]||{})}g.innerHTML='<div class="ks-editor-statusbar-item ks-editor-{NAME} ks-inline-block"></div>'.replace("{NAME}",a.name);a.domEl=e=g.firstChild;this._addToToolbar(e);a.editor=this.editor;a.init&&a.init();a.inited=true},_addSep:function(){g.innerHTML='<div class="ks-editor-stripbar-sep kissy-inline-block"></div>';this._addToToolbar(g.firstChild)},_addToToolbar:function(a){if(d){a=b.Dom.setItemUnselectable(a)}this.domEl.appendChild(a)}})});KISSY.Editor.add("core~menu",function(c){var d=YAHOO.util,j=d.Dom,k=d.Event,b=YAHOO.env.ua,i;c.Menu={generateDropMenu:function(f,e,a){var h=document.createElement("div"),g=this;h.innerHTML='<div class="ks-editor-drop-menu-shadow"></div><div class="ks-editor-drop-menu-content"></div>';h.className="ks-editor-drop-menu";h.style.display="none";document.body.appendChild(h);k.on(e,"click",function(l){k.stopPropagation(l);f.activeDropMenu&&g._hide(f);if(f.activeDropMenu!=h){g._setDropMenuPosition(e,h,a);f.activeDropMenu=h;f.activeDropButton=e;g._show(f)}else{f.activeDropMenu=null;f.activeDropButton=null}});k.on([document,f.contentDoc],"click",function(){if(f.activeDropMenu){g.hideActiveDropMenu(f);this==f.contentDoc&&f.contentWin.focus()}});this._initResizeEvent(e,h,a);return h.childNodes[1]},_setDropMenuPosition:function(f,e,a){var g=j.getRegion(f);f=g.left;g=g.bottom;if(a){f+=a[0];g+=a[1]}e.style.left=f+"px";e.style.top=g+"px"},_isVisible:function(a){if(!a){return false}return a.style.display!="none"},hideActiveDropMenu:function(a){this._hide(a);a.activeDropMenu=null;a.activeDropButton=null},_hide:function(e){var a=e.activeDropMenu;e=e.activeDropButton;if(a){i&&(i.style.display="none");a.style.display="none"}e&&j.removeClass(e,"ks-editor-toolbar-button-selected")},_show:function(e){var a=e.activeDropMenu;e=e.activeDropButton;if(a){a.style.display="";if(b.ie===6){this._updateShimRegion(a);i.style.display=""}}e&&j.addClass(e,"ks-editor-toolbar-button-selected")},_updateShimRegion:function(a){if(a){if(b.ie===6){i||this._initShim();this._setShimRegion(a)}}},_initResizeEvent:function(f,e,a){var h=this,g;k.on(window,"resize",function(){g&&clearTimeout(g);g=setTimeout(function(){h._isVisible(e)&&h._setDropMenuPosition(f,e,a)},50)})},_initShim:function(){i=document.createElement("iframe");i.src="about:blank";i.className="ks-editor-drop-menu-shim";i.style.position="absolute";i.style.display="none";i.style.border="none";document.body.appendChild(i)},_setShimRegion:function(a){if(i&&this._isVisible(a)){a=j.getRegion(a);if(a.width>0){i.style.left=a.left+"px";i.style.top=a.top+"px";i.style.width=a.width-1+"px";i.style.height=a.height-1+"px"}}}}});KISSY.Editor.add("smilies~config~default",function(b){b.Smilies=b.Smilies||{};b.Smilies["default"]={name:"default",mode:"icons",cols:5,fileNames:["smile","confused","cool","cry","eek","angry","wink","sweat","lol","stun","razz","shy","rolleyes","sad","happy","yes","no","heart","idea","rose"],fileExt:"gif"}});KISSY.Editor.add("smilies~config~wangwang",function(b){b.Smilies=b.Smilies||{};b.Smilies.wangwang={name:"wangwang",mode:"sprite",base:"http://a.tbcdn.cn/sys/wangwang/smiley/48x48/",spriteStyle:"background: url(http://a.tbcdn.cn/sys/wangwang/smiley/sprite.png) no-repeat -1px 0; width: 288px; height: 235px",unitStyle:"width: 24px; height: 24px",filePattern:{start:0,end:98,step:1},fileExt:"gif"}});KISSY.Editor.add("plugins~base",function(b){var c=b.PLUGIN_TYPE;b.addPlugin("bold,italic,underline,strikeThrough,insertOrderedList,insertUnorderedList".split(","),{type:c.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});KISSY.Editor.add("plugins~color",function(c){var m=YAHOO.util,o=m.Dom,p=m.Event,b=YAHOO.env.ua.ie,n=["000","444","666","999","CCC","EEE","F3F3F3","FFF"],i=["F00","F90","FF0","0F0","0FF","00F","90F","F0F"],d=["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D2E9","EAD1DC","EA9999","F9CB9C","FFE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD","E06666","F6B26B","FFD966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BAD","CC0000","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A64D79","990000","B45F06","BF9000","38761D","134F5C","0B5394","351C75","741B47","660000","783F04","7F6000","274E13","0C343D","073763","20124D","4C1130"];c.addPlugin(["foreColor","backColor"],{type:c.PLUGIN_TYPE.TOOLBAR_MENU_BUTTON,color:"",_indicator:null,swatches:null,dropMenu:null,range:null,init:function(){var a=this.domEl,e=a.getElementsByTagName("span")[0].parentNode;this.color=this._getDefaultColor();o.addClass(a,"ks-editor-toolbar-color-button");e.innerHTML='<div class="ks-editor-toolbar-color-button-indicator" style="border-bottom-color:'+this.color+'">'+e.innerHTML+"</div>";this._indicator=e.firstChild;this._renderUI();this._bindUI();this.swatches=o.getElementsByClassName("ks-editor-palette-colorswatch","div",this.dropMenu)},_renderUI:function(){this.dropMenu=c.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._generatePalettes();b&&c.Dom.setItemUnselectable(this.dropMenu)},_bindUI:function(){this._bindPickEvent();p.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();b&&this.editor.contentDoc.selection.empty();this._updateSelectedColor(this.color)},this,true)},_generatePalettes:function(){var a="";a+=this._getPaletteTable(n);a+=this._getPaletteTable(i);a+=this._getPaletteTable(d);this.dropMenu.innerHTML=a},_getPaletteTable:function(e){var h,g=e.length,a,f="<tr>";h=0;for(g=e.length;h<g;++h){if(h!=0&&h%8==0){f+="</tr><tr>"}a=c.Color.toRGB("#"+e[h]).toUpperCase();f+='<td class="ks-editor-palette-cell"><div class="ks-editor-palette-colorswatch" title="{COLOR}" style="background-color:{COLOR}"></div></td>'.replace(/{COLOR}/g,a)}f+="</tr>";return'<div class="ks-editor-palette-table"><table><tbody>{TR}</tbody></table></div>'.replace("{TR}",f)},_bindPickEvent:function(){var a=this;p.on(this.dropMenu,"click",function(f){var e=p.getTarget(f).getAttribute("title");e&&e.indexOf("RGB")===0&&a._doAction(e);p.stopPropagation(f);c.Menu.hideActiveDropMenu(a.editor)})},_doAction:function(a){if(a){this.setColor(c.Color.toHex(a));a=this.range;b&&a.select&&a.select();this.editor.execCommand(this.name,this.color)}},setColor:function(a){this.color=a;this._updateIndicatorColor(a);this._updateSelectedColor(a)},_updateIndicatorColor:function(a){this._indicator.style.borderBottomColor=a},_updateSelectedColor:function(e){var h,g,a,f=this.swatches;h=0;for(g=f.length;h<g;++h){a=f[h];c.Color.toHex(a.style.backgroundColor)==e?o.addClass(a.parentNode,"ks-editor-palette-cell-selected"):o.removeClass(a.parentNode,"ks-editor-palette-cell-selected")}},_getDefaultColor:function(){return this.name=="foreColor"?"#000000":"#ffffff"}})});KISSY.Editor.add("plugins~font",function(c){var d=YAHOO.util,j=d.Dom,k=d.Event,b=YAHOO.env.ua,i={"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7};c.addPlugin(["fontName","fontSize"],{type:c.PLUGIN_TYPE.TOOLBAR_SELECT,selectedValue:"",selectHead:null,selectList:null,options:[],items:null,selectedItem:null,range:null,init:function(){this.options=this.lang.options;this.selectHead=this.domEl.getElementsByTagName("span")[0];this._renderUI();this._bindUI()},_renderUI:function(){this.selectList=c.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);this._renderSelectList();this.items=this.selectList.getElementsByTagName("li")},_bindUI:function(){this._bindPickEvent();k.on(this.domEl,"click",function(){this.range=this.editor.getSelectionRange();b.ie&&this.editor.contentDoc.selection.empty();if(this.selectedValue){this._updateSelectedOption(this.selectedValue)}else{if(this.selectedItem){j.removeClass(this.selectedItem,"ks-editor-option-selected");this.selectedItem=null}}},this,true)},_renderSelectList:function(){var f="",e=this.options,a,g;for(a in e){g=e[a];f+='<li class="ks-editor-option" data-value="{VALUE}"><span class="ks-editor-option-checkbox"></span><span style="{STYLE}">{KEY}</span></li>'.replace("{VALUE}",g).replace("{STYLE}",this._getOptionStyle(a,g)).replace("{KEY}",a)}this.selectList.innerHTML='<ul class="ks-editor-select-list">{LI}</ul>'.replace("{LI}",f);j.addClass(this.selectList,"ks-editor-drop-menu-"+this.name)},_bindPickEvent:function(){var a=this;k.on(this.selectList,"click",function(f){var e=k.getTarget(f);if(e.nodeName!="LI"){e=j.getAncestorByTagName(e,"li")}if(e){a._doAction(e.getAttribute("data-value"));k.stopPropagation(f);c.Menu.hideActiveDropMenu(a.editor)}});if(b.ie===6){k.on(this.items,"mouseenter",function(){j.addClass(this,"ks-editor-option-hover")});k.on(this.items,"mouseleave",function(){j.removeClass(this,"ks-editor-option-hover")})}},_doAction:function(a){if(a){this.selectedValue=a;this._setOption(a);a=this.range;b.ie&&a.select&&a.select();this.editor.execCommand(this.name,this.selectedValue)}},_setOption:function(a){this._updateHeadText(this._getOptionKey(a));this._updateSelectedOption(a)},_getOptionStyle:function(e,a){return this.name=="fontName"?"font-family:"+a:"font-size:"+e+"px"},_getOptionKey:function(f){var e=this.options,a;for(a in e){if(e[a]==f){return a}}return null},_updateHeadText:function(a){this.selectHead.innerHTML=a},_updateSelectedOption:function(f){var e=this.items,a,h=e.length,g;for(a=0;a<h;++a){g=e[a];if(g.getAttribute("data-value")==f){j.addClass(g,"ks-editor-option-selected");this.selectedItem=g}else{j.removeClass(g,"ks-editor-option-selected")}}},updateState:function(){var g=this.editor.contentDoc,f=this.options,e=this.name,l,h;try{if(g.queryCommandEnabled(e)){h=g.queryCommandValue(e);if(b.webkit&&e=="fontSize"){h=this._getWebkitFontSize(h)}h&&(l=this._getOptionKey(h));if(l in f){if(h!=this.selectedValue){this.selectedValue=h;this._updateHeadText(l)}}else{this.selectedValue="";this._updateHeadText(this.lang.text)}}}catch(a){}},_getWebkitFontSize:function(a){if(a in i){return i[a]}return null}})});KISSY.Editor.add("plugins~image",function(x){var r=YAHOO.util,t=r.Dom,u=r.Event,o=r.Connect,s=YAHOO.lang,q=YAHOO.env.ua,p=q.ie,w="ks-editor-image-tab-selected",v=/^(?:.*?:\/\/)?(.*?)\/.*$/,d={local:'<li rel="local" class="'+w+'">{tab_local}</li>',link:'<li rel="link">{tab_link}</li>',album:'<li rel="album">{tab_album}</li>'},i={tabs:["link"],upload:{actionUrl:"",filter:"png|gif|jpg|jpeg",filterMsg:"",linkFilter:"",linkFilterMsg:"",enableXdr:false,connectionSwf:"http://a.tbcdn.cn/yui/2.8.0r4/build/connection/connection.swf",formatResponse:function(c){var b=[];for(var a in c){b.push(c[a])}return b},extraCode:""}};x.addPlugin("image",{type:x.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,form:null,range:null,currentTab:null,currentPanel:null,uploadingPanel:null,actionsBar:null,init:function(){var a=this.editor.config.pluginsConfig[this.name]||{};i.upload.filterMsg=this.lang.upload_filter;i.upload.linkFilterMsg=this.lang.upload_linkFilter;this.config=s.merge(i,a);this.config.upload=s.merge(i.upload,a.upload||{});this._renderUI();this._bindUI();this.actionsBar=t.getElementsByClassName("ks-editor-dialog-actions","div",this.dialog)[0];this.uploadingPanel=t.getElementsByClassName("ks-editor-image-uploading","div",this.dialog)[0];this.config.upload.enableXdr&&this._initXdrUpload()},_renderUI:function(){var b=x.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),a=this.lang;a.local_extraCode=this.config.upload.extraCode;b.className+=" ks-editor-image";b.innerHTML='<form action="javascript: void(0)"><ul class="ks-editor-image-tabs ks-clearfix"></ul><div class="ks-editor-image-tab-content" rel="local" style="display: none"><label>{label_local}</label><input type="file" size="40" name="imgFile" unselectable="on" />{local_extraCode}</div><div class="ks-editor-image-tab-content" rel="link"><label>{label_link}</label><input name="imgUrl" size="50" /></div><div class="ks-editor-image-tab-content" rel="album" style="display: none"><label>{label_album}</label><p style="width: 300px">\u5c1a\u672a\u5b9e\u73b0...</p></div><div class="ks-editor-image-uploading" style="display: none"><p style="width: 300px">{uploading}</p></div><div class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span></div></form>'.replace(/\{([^}]+)\}/g,function(c,e){return e in a?a[e]:e});this.dialog=b;this.form=b.getElementsByTagName("form")[0];p&&x.Dom.setItemUnselectable(b);this._renderTabs()},_renderTabs:function(){function e(B){for(var D=0,n=B.getAttribute("rel"),C=0;C<h;C++){j[C]&&t.removeClass(j[C],w);f[C].style.display="none";if(f[C].getAttribute("rel")==n){D=C}}q.ie===6&&x.Menu._updateShimRegion(a.dialog);t.addClass(B,w);f[D].style.display="";a.currentTab=B.getAttribute("rel");a.currentPanel=f[D]}for(var b=this.lang,a=this,g=t.getElementsByClassName("ks-editor-image-tabs","ul",this.dialog)[0],f=t.getElementsByClassName("ks-editor-image-tab-content","div",this.dialog),c=this.config.tabs,m="",l=0,k=c.length;l<k;l++){m+=d[c[l]]}g.innerHTML=m.replace(/\{([^}]+)\}/g,function(n,z){return z in b?b[z]:z});var j=g.childNodes,h=f.length;j.length===1&&t.addClass(this.dialog,"ks-editor-image-no-tab");e(j[0]);u.on(j,"click",function(){e(this)})},_bindUI:function(){var a=this;u.on(this.domEl,"click",function(){if(a.dialog.style.visibility===p?"hidden":"visible"){a._syncUI()}});u.on(this.dialog,"click",function(c){var b=u.getTarget(c),e=a.currentTab;switch(b.className){case"ks-editor-btn-ok":if(e==="local"){u.stopPropagation(c);a._insertLocalImage()}else{a._insertWebImage()}break;case"ks-editor-btn-cancel":break;default:u.stopPropagation(c)}})},_initXdrUpload:function(){for(var c=this.config.tabs,b=0,a=c.length;b<a;b++){if(c[b]==="local"){o.transport(this.config.upload.connectionSwf);break}}},_insertLocalImage:function(){var f=this.form,c=this.config.upload,b=f.imgFile.value,e=c.actionUrl,a=this;if(b&&e){if(c.filter!=="*"){b=b.substring(b.lastIndexOf(".")+1).toLowerCase();if(c.filter.indexOf(b)==-1){alert(c.filterMsg);a.form.reset();return}}this.uploadingPanel.style.display="";this.currentPanel.style.display="none";this.actionsBar.style.display="none";q.ie===6&&x.Menu._updateShimRegion(this.dialog);o.setForm(f,true);o.asyncRequest("post",e,{upload:function(j){try{var h=c.formatResponse(s.JSON.parse(j.responseText));if(h[0]=="0"){a._insertImage(h[1]);a._hideDialog()}else{a._onUploadError(h[1])}}catch(g){a._onUploadError(s.dump(g)+"\no = "+s.dump(j)+"\n[from upload catch code]")}},xdr:c.enableXdr})}else{a._hideDialog()}},_onUploadError:function(a){alert(this.lang.upload_error+"\n\n"+a);this._hideDialog()},_insertWebImage:function(){var f=this.form.imgUrl.value||"",c=this.config.upload,b=c.linkFilter,e,a;if(e=v.exec(f)){a=e[1]}if(f&&a){if(b&&b!=="*"){if(("|"+b.toLowerCase()+"|").indexOf("|"+a.toLowerCase()+"|")===-1){alert(c.linkFilterMsg);return}}this._insertImage(f)}},_hideDialog:function(){var a=this.editor.activeDropMenu;a&&t.isAncestor(a,this.dialog)&&x.Menu.hideActiveDropMenu(this.editor);this.editor.contentWin.focus()},_syncUI:function(){this.range=x.Range.saveRange(this.editor);this.form.reset();this.uploadingPanel.style.display="none";this.currentPanel.style.display="";this.actionsBar.style.display=""},_insertImage:function(f,c){f=s.trim(f);if(f.length!==0){var b=this.editor,e=this.range;if(window.getSelection){var a=b.contentDoc.createElement("img");a.src=f;c&&a.setAttribute("alt",c);e.deleteContents();e.insertNode(a);if(q.webkit){c=b.contentWin.getSelection();c.addRange(e);c.collapseToEnd()}else{e.setStartAfter(a)}b.contentWin.focus()}else{if(document.selection){b.contentWin.focus();if("text" in e){e.select();b='<img src="'+f+'"';c&&(b+=' "alt="'+c+'"');b+=">";e.pasteHTML(b)}else{e.execCommand("insertImage",false,f)}}}}}})});KISSY.Editor.add("plugins~indent",function(b){b.addPlugin(["indent","outdent"],{type:b.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState()}})});KISSY.Editor.add("plugins~justify",function(b){var c=["justifyLeft","justifyCenter","justifyRight"];b.addPlugin(c,{type:b.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name);this.editor.toolbar.updateState(c)}})});KISSY.Editor.add("plugins~keystroke",function(b){var c=YAHOO.util.Event,d=YAHOO.env.ua;b.addPlugin("keystroke",{type:b.PLUGIN_TYPE.FUNC,init:function(){var f=this.editor;d.ie&&d.ie<8&&c.on(f.contentDoc,"keydown",function(e){e.keyCode==9&&this.selection.empty()});var a=f.textarea.form;a&&(new YAHOO.util.KeyListener(f.contentDoc,{ctrl:true,keys:13},{fn:function(){if(!f.sourceMode){f.textarea.value=f.getData()}a.submit()}})).enable()}})});KISSY.Editor.add("plugins~link",function(v){var p=YAHOO.util,r=p.Dom,s=p.Event,i=YAHOO.lang,q=YAHOO.env.ua,o=q.ie;p=v.PLUGIN_TYPE;var m=v.Range,u=(new Date).getTime(),t=/^\w+:\/\/.*|#.*$/,d=['<form onsubmit="return false"><ul><li class="ks-editor-link-href"><label>{href}</label><input name="href" style="width: 220px" value="http://" type="text" /></li><li class="ks-editor-link-target"><input name="target" id="target_"',u,' type="checkbox" /> <label for="target_"',u,'>{target}</label></li><li class="ks-editor-dialog-actions"><button name="ok" class="ks-editor-btn-ok">{ok}</button><span class="ks-editor-btn-cancel">{cancel}</span><span class="ks-editor-link-remove">{remove}</span></li></ul></form>'].join("");v.addPlugin("link",{type:p.TOOLBAR_BUTTON,dialog:null,form:null,range:null,init:function(){this._renderUI();this._bindUI()},_renderUI:function(){var a=v.Menu.generateDropMenu(this.editor,this.domEl,[1,0]),b=this.lang;a.className+=" ks-editor-link";a.innerHTML=d.replace(/\{([^}]+)\}/g,function(e,c){return b[c]?b[c]:c});this.dialog=a;this.form=a.getElementsByTagName("form")[0];q.webkit&&(this.form.target.parentNode.style.display="none");o&&v.Dom.setItemUnselectable(a)},_bindUI:function(){var a=this.form,b=this;s.on(this.domEl,"click",function(){if(b.dialog.style.visibility===o?"hidden":"visible"){b._syncUI()}});s.on(this.dialog,"click",function(c){switch(s.getTarget(c).className){case"ks-editor-btn-ok":b._createLink(a.href.value,a.target.checked);break;case"ks-editor-btn-cancel":break;case"ks-editor-link-remove":b._unLink();break;default:s.stopPropagation(c)}})},_syncUI:function(){this.range=v.Range.saveRange(this.editor);var a=this.form,b;b=m.getCommonAncestor(this.range);if(b=b.nodeName=="A"?b:r.getAncestorByTagName(b,"A")){a.href.value=b.href;a.target.checked=b.target==="_blank";r.removeClass(a,"ks-editor-link-newlink-mode")}else{a.href.value="http://";a.target.checked=false;r.addClass(a,"ks-editor-link-newlink-mode")}setTimeout(function(){a.href.select()},50)},_createLink:function(a,f){a=this._getValidHref(a);if(a.length===0){this._unLink()}else{var c=this.range,b=document.createElement("div"),e;e=m.getCommonAncestor(c);if(e=e.nodeName=="A"?e:r.getAncestorByTagName(e,"A")){e.href=a;f?e.setAttribute("target","_blank"):e.removeAttribute("target")}else{e=document.createElement("a");e.href=a;f&&e.setAttribute("target","_blank");if(o){c.select&&c.select();if("text" in c){e.innerHTML=c.htmlText||a;b.innerHTML="";b.appendChild(e);c.pasteHTML(b.innerHTML)}else{this.editor.execCommand("createLink",a)}}else{if(q.webkit){this.editor.execCommand("createLink",a)}else{if(c.collapsed){e.innerHTML=a}else{for(a=c.cloneContents();a.firstChild;){e.appendChild(a.firstChild)}}c.deleteContents();c.insertNode(e);c.selectNode(e)}}}}},_getValidHref:function(a){if((a=i.trim(a))&&!t.test(a)){a="http://"+a}return a},_unLink:function(){var a=this.editor,e=this.range,c=m.getSelectedText(e),b=m.getCommonAncestor(e);if(!c&&b.nodeType==3){a=b.parentNode;a.nodeName=="A"&&a.parentNode.replaceChild(b,a)}else{e.select&&e.select();a.execCommand("unLink",null)}}})});KISSY.Editor.add("plugins~resize",function(b){var c=YAHOO.util.Event;b.addPlugin("resize",{type:b.PLUGIN_TYPE.STATUSBAR_ITEM,contentEl:null,currentHeight:0,init:function(){this.contentEl=this.editor.container.childNodes[1];this.currentHeight=parseInt(this.contentEl.style.height);this.renderUI();this.bindUI()},renderUI:function(){var a=this.lang;this.domEl.innerHTML='<span class="ks-editor-resize-larger" title="{larger_title}">{larger_text}</span><span class="ks-editor-resize-smaller" title="{smaller_title}">{smaller_text}</span>'.replace(/\{([^}]+)\}/g,function(f,d){return a[d]?a[d]:d})},bindUI:function(){var a=this.domEl.getElementsByTagName("span"),d=a[1];c.on(a[0],"click",function(){this.currentHeight+=100;this._doResize()},this,true);c.on(d,"click",function(){if(this.currentHeight<100){this.currentHeight=0}else{this.currentHeight-=100}this._doResize()},this,true)},_doResize:function(){this.contentEl.style.height=this.currentHeight+"px";this.editor.textarea.style.height=this.currentHeight+"px"}})});KISSY.Editor.add("plugins~save",function(b){var c=YAHOO.util.Event,d={b:{tag:"strong"},i:{tag:"em"},u:{tag:"span",style:"text-decoration:underline"},strike:{tag:"span",style:"text-decoration:line-through"}};b.addPlugin("save",{type:b.PLUGIN_TYPE.FUNC,init:function(){var h=this.editor,a=h.textarea,f=a.form;f&&c.on(f,"submit",function(){if(!h.sourceMode){a.value=h.getData()}})},filterData:function(a){a=a.replace(/<(\/?)([^>\s]+)([^>]*)>/g,function(e,i,h,f){h=h.toLowerCase();e=d[h];h=h;if(e&&!f){h=e.tag;if(!i&&e.style){h+=' style="'+e.style+'"'}}return"<"+i+h+f+">"});if(a.indexOf("mso")>0){a=this.filterWord(a)}return a},filterWord:function(a){a=a.replace(/<(\w[^>]*) onmouseover="([^\"]*)"([^>]*)/gi,"<$1$3");a=a.replace(/<(\w[^>]*) onmouseout="([^\"]*)"([^>]*)/gi,"<$1$3");a=a.replace(/<H(\d)([^>]*)>/gi,"<h$1>");a=a.replace(/<(H\d)><FONT[^>]*>([\s\S]*?)<\/FONT><\/\1>/gi,"<$1>$2</$1>");a=a.replace(/<(H\d)><EM>([\s\S]*?)<\/EM><\/\1>/gi,"<$1>$2</$1>");a=a.replace(/<meta[^>]*>/ig,"");a=a.replace(/<link rel="\S+" href="file:[^>]*">/ig,"");a=a.replace(/<!--\[if gte mso [0-9]{1,2}\]>[\s\S]*?<!\[endif\]--\>/ig,"");a=a.replace(/<style>[\s\S]*?mso[\s\S]*?<\/style>/ig,"");a=a.replace(/ lang=".+?"/ig,"");a=a.replace(/<o:p><\/o:p>/ig,"");a=a.replace(/ class="Mso.+?"/ig,"");return a=a.replace(/<\\?\?xml[^>]*>/ig,"")}})});KISSY.Editor.add("plugins~smiley",function(c){var d=YAHOO.util.Event,g=YAHOO.lang,i=YAHOO.env.ua,b={tabs:["default"]};c.addPlugin("smiley",{type:c.PLUGIN_TYPE.TOOLBAR_BUTTON,config:{},dialog:null,range:null,init:function(){this.config=g.merge(b,this.editor.config.pluginsConfig[this.name]||{});this._renderUI();this._bindUI()},_renderUI:function(){var a=c.Menu.generateDropMenu(this.editor,this.domEl,[1,0]);a.className+=" ks-editor-smiley-dialog";this.dialog=a;this._renderDialog();i.ie&&c.Dom.setItemUnselectable(a)},_renderDialog:function(){var e=c.Smilies[this.config.tabs[0]],a=e.mode;if(a==="icons"){this._renderIcons(e)}else{a==="sprite"&&this._renderSprite(e)}},_renderIcons:function(l){var h=this.editor.config.base+"smilies/"+l.name+"/",f=l.fileNames,e="."+l.fileExt;l=l.cols;var r=[],q,a=f.length,p;r.push('<div class="ks-editor-smiley-icons">');for(q=0;q<a;q++){p=f[q];r.push('<img src="'+h+p+e+'" alt="'+p+'" title="'+p+'" />');q%l===l-1&&r.push("<br />")}r.push("</div");this.dialog.innerHTML=r.join("")},_renderSprite:function(l){var h=l.base,f=l.filePattern,e="."+l.fileExt,p=f.end+1;f=f.step;var o,a=[];a.push('<div class="ks-editor-smiley-sprite ks-clearfix" style="'+l.spriteStyle+'">');for(o=0;o<p;o+=f){a.push('<span data-icon="'+h+o+e+'" style="'+l.unitStyle+'"></span>')}a.push("</div");this.dialog.innerHTML=a.join("")},_bindUI:function(){var a=this;d.on(this.domEl,"click",function(){a.range=c.Range.saveRange(a.editor)});d.on(this.dialog,"click",function(f){var e=d.getTarget(f);switch(e.nodeName){case"IMG":a._insertImage(e.src,e.getAttribute("alt"));break;case"SPAN":a._insertImage(e.getAttribute("data-icon"),"");break;default:d.stopPropagation(f)}})},_insertImage:function(h,f){h=g.trim(h);if(h.length!==0){var e=this.editor,a=this.range;if(window.getSelection){var l=e.contentDoc.createElement("img");l.src=h;l.setAttribute("alt",f);a.deleteContents();a.insertNode(l);if(i.webkit){h=e.contentWin.getSelection();h.addRange(a);h.collapseToEnd()}else{a.setStartAfter(l)}e.contentWin.focus()}else{if(document.selection){"text" in a?a.pasteHTML('<img src="'+h+'" alt="'+f+'" />'):e.execCommand("insertImage",h)}}}}})});KISSY.Editor.add("plugins~source",function(b){var c=YAHOO.util.Dom,d=YAHOO.env.ua;b.addPlugin("source",{type:b.PLUGIN_TYPE.TOOLBAR_BUTTON,init:function(){var a=this.editor;this.iframe=a.contentWin.frameElement;this.textarea=a.textarea;this.iframe.parentNode.appendChild(a.textarea);c.addClass(this.domEl,"ks-editor-toolbar-source-button")},exec:function(){var f=this.editor,a=f.sourceMode;if(a){f.contentDoc.body.innerHTML=this.textarea.value}else{this.textarea.value=f.getContentDocData()}d.ie&&d.ie<8&&f.contentDoc.selection.empty();this.textarea.style.display=a?"none":"";this.iframe.style.display=a?"":"none";f.sourceMode=!a;this._updateButtonState()},_updateButtonState:function(){var a=this.editor;if(a.sourceMode){c.addClass(a.container,"ks-editor-src-mode");c.addClass(this.domEl,"ks-editor-toolbar-button-selected")}else{c.removeClass(a.container,"ks-editor-src-mode");c.removeClass(this.domEl,"ks-editor-toolbar-button-selected")}}})});KISSY.Editor.add("plugins~undo",function(b){b.addPlugin(["undo","redo"],{type:b.PLUGIN_TYPE.TOOLBAR_BUTTON,exec:function(){this.editor.execCommand(this.name)}})});KISSY.Editor.add("plugins~wordcount",function(c){var d=YAHOO.util,j=d.Dom,k=d.Event,b=YAHOO.lang,i={total:50000,threshold:100};c.addPlugin("wordcount",{type:c.PLUGIN_TYPE.STATUSBAR_ITEM,total:Infinity,remain:Infinity,threshold:0,remainEl:null,init:function(){var e=b.merge(i,this.editor.config.pluginsConfig[this.name]||{});this.total=e.total;this.threshold=e.threshold;this.renderUI();this.bindUI();var a=this;setTimeout(function(){a.syncUI()},50)},renderUI:function(){this.domEl.innerHTML=this.lang.tmpl.replace("%remain%","<em>"+this.total+"</em>");this.remainEl=this.domEl.getElementsByTagName("em")[0]},bindUI:function(){var a=this.editor;k.on(a.textarea,"keyup",this.syncUI,this,true);k.on(a.contentDoc,"keyup",this.syncUI,this,true);k.on(a.container,"click",this.syncUI,this,true)},syncUI:function(){this.remain=this.total-this.editor.getData().length;this.remainEl.innerHTML=this.remain;this.remain<=this.threshold?j.addClass(this.domEl,"ks-editor-wordcount-alarm"):j.removeClass(this.domEl,"ks-editor-wordcount-alarm")}})});
