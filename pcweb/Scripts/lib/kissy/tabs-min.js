/*=======================tabs-min.js===========================*/
/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Aug 21 20:57
*/
KISSY.add("tabs/bar",function(c,b){var a=b.extend({createDom:function(){this.get("el").attr("role","tablist")},handleKeyEventInternal:function(){a.superclass.handleKeyEventInternal.apply(this,arguments);"mouse"!=this.get("changeType")&&this.set("selectedTab",this.get("highlightedItem"))},handleFocus:function(){a.superclass.handleFocus.apply(this,arguments);this.set("highlightedItem",this.get("selectedTab"))},renderUI:function(){var a=this,b=a.get("children");c.each(b,function(b){b.get("selected")&&
a.set("selectedTab",b)})},bindUI:function(){var a=this,b=a.get("changeType");a.on("afterSelectedTabChange"+("mouse"==b?" afterHighlightedItemChange":""),function(a){a.newVal&&(a.prevVal&&a.prevVal.set("selected",!1),a.newVal.set("selected",!0))});a.on("afterSelectedChange",function(b){b.newVal&&b.target.isTabsTab&&a.set("selectedTab",b.target)})}},{ATTRS:{selectedTab:{},changeType:{value:"click"}}},{xclass:"tabs-bar",priority:30});a.changeType={CLICK:"click",MOUSE:"mouse"};return a},{requires:["toolbar"]});
KISSY.add("tabs/body",function(c,b){return b.Container.extend({setSelectedPanelByIndexInternal:function(a){this.set("selectedPanel",this.get("children")[a])},renderUI:function(){var a=this,b=a.get("children");c.each(b,function(b){b.get("selected")&&a.set("selectedPanel",b)})},bindUI:function(){this.on("afterSelectedPanelChange",function(a){a.newVal&&(a.prevVal&&a.prevVal.set("selected",!1),a.newVal.set("selected",!0))})}},{ATTRS:{selectedPanel:{},allowTextSelection:{value:!0},focusable:{value:!1},
handleMouseEvents:{value:!1},delegateChildren:{value:!1}}},{xclass:"tabs-body"})},{requires:["component"]});
KISSY.add("tabs/panel-render",function(c,b){return b.Render.extend({createDom:function(){this.get("el").attr("role","tabpanel")},_uiSetSelected:function(a){var b=this.get("el");b[a?"addClass":"removeClass"](this.get("selectedCls"));b.attr("aria-hidden",!a)}},{ATTRS:{selected:{value:!1},selectedCls:{value:"ks-tabs-panel-selected"}},HTML_PARSER:{selected:function(a){return a.hasClass(this.get("selectedCls"))}}},{xclass:"tabs-panel"})},{requires:["component"]});
KISSY.add("tabs/panel",function(c,b,a){return b.Controller.extend({},{ATTRS:{selected:{view:1},focusable:{value:!1},allowTextSelection:{value:!0},selectedCls:{view:1},xrender:{value:a}}},{xclass:"tabs-panel"})},{requires:["component","./panel-render"]});
KISSY.add("tabs/render",function(c,b){return b.Render.extend({_uiSetBarOrientation:function(a){this.get("el").removeClass(this.getCssClassWithPrefix("tabs-top tabs-bottom tabs-left tabs-right")).addClass(this.getCssClassWithPrefix("tabs-"+a))}},{ATTRS:{barOrientation:{value:"top"}},HTML_PARSER:{barOrientation:function(a){return(a=a[0].className.match(/tabs-(top|bottom|left|right)\b/))&&a[1]||"top"}}})},{requires:["component"]});
KISSY.add("tabs/tab-render",function(c,b){return b.Render.extend({createDom:function(){this.get("el").attr("role","tab")},_uiSetSelected:function(a){var b=this.get("el");b[a?"addClass":"removeClass"](this.get("selectedCls"));b.attr("aria-selected",!!a)}},{ATTRS:{selected:{value:!1},selectedCls:{value:"ks-tabs-tab-selected"}},HTML_PARSER:{selected:function(a){return a.hasClass(this.get("selectedCls"))}}},{xclass:"tabs-tab"})},{requires:["button"]});
KISSY.add("tabs/tab",function(c,b,a){return b.extend({isTabsTab:!0,bindUI:function(){this.publish("afterSelectedChange",{bubbles:1});this.on("click",function(){this.set("selected",!0)})}},{ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},selected:{view:1},selectedCls:{view:1},xrender:{value:a}}},{xclass:"tabs-tab",priority:30})},{requires:["button","./tab-render"]});
KISSY.add("tabs",function(c,b,a,f,e,l,m){e=b.Controller.extend({initializer:function(){var a,b,d=this.get("tabSelectedCls"),j=this.get("panelSelectedCls"),g,k,e={xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},h={xclass:"tabs-body",children:[]},i=e.children,f=h.children;(b=this.get("items"))&&c.each(b,function(b){a=a||b.selected;i.push(g={xclass:"tabs-tab",content:b.title,selected:b.selected});f.push(k={xclass:"tabs-panel",content:b.content,selected:b.selected});d&&(g.selectedCls=
d);j&&(k.selectedCls=j)});!a&&i.length&&(i[0].selected=!0,f[0].selected=!0);this.set("bar",e);this.set("body",h)},addItem:function(a,b){var d=this.get("bar"),c,g;c=this.get("tabSelectedCls");var e=this.get("panelSelectedCls"),f,h=this.get("body");f={xclass:"tabs-tab",content:a.title};g={xclass:"tabs-panel",content:a.content};c&&(f.selectedCls=c);e&&(g.selectedCls=e);c=d.addChild(f,b);g=h.addChild(g,b);a.selected&&(d.set("selectedTab",c),h.set("selectedPanel",g));return this},removeItemAt:function(a,
b){var d=this.get("bar"),c=d.get("children"),e=d.getChildAt(a),f=this.get("body");e.get("selected")&&(1==c.length?d.set("selectedTab",null):0==a?d.set("selectedTab",d.getChildAt(a+1)):d.set("selectedTab",d.getChildAt(a-1)));d.removeChild(d.getChildAt(a),b);f.removeChild(f.getChildAt(a),b);return this},removeItemByTab:function(a){return this.removeItemAt(c.indexOf(a,this.get("bar").get("children")))},removeItemByPanel:function(a){return this.removeItemAt(c.indexOf(a,this.get("body").get("children")))},
getSelectedTab:function(){var a=this.get("bar"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(a){return this.get("bar").get("children")[a]},getPanelAt:function(a){return this.get("body").get("children")[a]},getSelectedPanel:function(){var a=this.get("body"),b=null;c.each(a.get("children"),function(a){if(a.get("selected"))return b=
a,!1});return b},renderUI:function(){var a=this.get("barOrientation"),b=this.get("el"),c=this.get("body"),e=this.get("bar");e.set("render",b);c.set("render",b);"bottom"==a?(c.render(),e.render()):(e.render(),c.render())},decorateInternal:function(b){var c=b.children(".ks-tabs-bar"),d=b.children(".ks-tabs-body");this.set("el",b);this.set("bar",new a({srcNode:c}));this.set("body",new f({srcNode:d}))},bindUI:function(){var a=this.get("body"),b=this.get("bar");b.on("afterSelectedTabChange",function(d){a.setSelectedPanelByIndexInternal(c.indexOf(d.newVal,
b.get("children")))})}},{ATTRS:{items:{},changeType:{},tabSelectedCls:{},panelSelectedCls:{},handleMouseEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},bar:{setter:function(a){if(!(a instanceof b.Controller))return b.create(a)},valueFn:function(){return b.create({xclass:"tabs-bar"})}},body:{setter:function(a){if(!(a instanceof b.Controller))return b.create(a)},valueFn:function(){return b.create({xclass:"tabs-body"})}},barOrientation:{view:1},xrender:{value:m}}},{xclass:"tabs"});
e.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};e.Bar=a;e.Body=f;e.Panel=l;return e},{requires:"component,tabs/bar,tabs/body,tabs/tab,tabs/panel,tabs/render".split(",")});

